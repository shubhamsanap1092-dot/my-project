<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SITS Pune - Attendance Portal</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    
   <style>
    :root {
        --primary-dark: #0f172a;
        --secondary-dark: #1e293b;
        --accent: #3b82f6;
        --accent-glow: rgba(59, 130, 246, 0.5);
        --glass-bg: rgba(255, 255, 255, 0.7);
        --glass-border: rgba(255, 255, 255, 0.5);
        --text-main: #1e293b;
        --text-muted: #64748b;
        --success: #10b981;
        --danger: #ef4444;
        --warning: #f59e0b;
        --card-shadow: 0 10px 30px -10px rgba(0, 0, 0, 0.1);
        --sidebar-width: 280px;
    }

    body.dark {
        --glass-bg: rgba(15, 23, 42, 0.6);
        --glass-border: rgba(255, 255, 255, 0.1);
        --text-main: #f1f5f9;
        --text-muted: #94a3b8;
        --card-shadow: 0 10px 30px -10px rgba(0, 0, 0, 0.5);
    }

    * {
        box-sizing: border-box;
        -webkit-tap-highlight-color: transparent;
        outline: none;
    }

    body {
        background: linear-gradient(135deg, #f0f4ff 0%, #e0e7ff 100%);
        color: var(--text-main);
        height: 100vh;
        margin: 0;
        display: flex;
        overflow: hidden;
        font-family: 'Outfit', sans-serif;
        transition: background 0.5s ease;
    }

    body.dark {
        background: linear-gradient(135deg, #0f172a 0%, #020617 100%);
    }

    @keyframes float {
        0% { transform: translateY(0px); }
        50% { transform: translateY(-10px); }
        100% { transform: translateY(0px); }
    }

    @keyframes fadeInScale {
        from { opacity: 0; transform: scale(0.95) translateY(20px); }
        to { opacity: 1; transform: scale(1) translateY(0); }
    }

    @keyframes gradientShift {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
    }

    .btn {
        padding: 12px 24px;
        border-radius: 12px;
        border: none;
        font-weight: 600;
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        font-size: 14px;
        position: relative;
        overflow: hidden;
        z-index: 1;
    }

    .btn::after {
        content: '';
        position: absolute;
        inset: 0;
        background: rgba(255,255,255,0.2);
        transform: scaleX(0);
        transform-origin: right;
        transition: transform 0.3s ease;
        z-index: -1;
    }

    .btn:hover::after { 
        transform: scaleX(1); 
        transform-origin: left; 
    }
    .btn:active { transform: scale(0.96); }

    .btn-p { 
        background: linear-gradient(135deg, #3b82f6, #2563eb); 
        color: white; 
        box-shadow: 0 4px 15px var(--accent-glow); 
    }
    .btn-s { 
        background: linear-gradient(135deg, #10b981, #059669); 
        color: white; 
        box-shadow: 0 4px 15px rgba(16, 185, 129, 0.4); 
    }
    .btn-w { 
        background: linear-gradient(135deg, #3b82f6, #1d4ed8); 
        color: white; 
    }
    .btn-e { 
        background: #16a34a; 
        color: white; 
    }
    .btn-d { 
        background: rgba(239, 68, 68, 0.1); 
        color: var(--danger); 
        border: 1px solid var(--danger); 
    }
    .btn-dark { 
        background: #334155; 
        color: white; 
    }

   #authScreen {
        position: fixed;
        inset: 0;
        background: url('https://raw.githubusercontent.com/shubhamsanap1092-dot/SHUBHAM-/main/16fbf6e1-310d-425c-a37a-d95413e0f1c4.tmp');
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        z-index: 9999;
        display: flex;
        align-items: center;
        justify-content: center;
        backdrop-filter: blur(3px);
        -webkit-backdrop-filter: blur(3px);
    }

    .login-card {
        background: rgba(255, 255, 255, 0.95);
        width: 420px;
        padding: 50px;
        border-radius: 24px;
        text-align: center;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        border: 1px solid rgba(255, 255, 255, 0.5);
        transform-style: preserve-3d;
        animation: fadeInScale 0.8s cubic-bezier(0.2, 0.8, 0.2, 1);
    }

    body.dark .login-card { background: rgba(30, 41, 59, 0.9); border-color: rgba(255,255,255,0.05); }

    .login-input {
        width: 100%;
        padding: 16px;
        margin-bottom: 20px;
        border-radius: 12px;
        border: 2px solid transparent;
        background: rgba(0,0,0,0.05);
        color: var(--text-main);
        font-size: 15px;
        transition: 0.3s;
        font-family: inherit;
    }

    body.dark .login-input { 
        background: rgba(255,255,255,0.05); 
        color: white; 
    }
    .login-input:focus { 
        border-color: var(--accent); 
        background: white; 
        box-shadow: 0 0 0 4px var(--accent-glow); 
        transform: translateY(-2px);
    }

    aside {
        width: var(--sidebar-width);
        background: var(--glass-bg);
        backdrop-filter: blur(20px);
        display: flex;
        flex-direction: column;
        border-right: 1px solid var(--glass-border);
        transition: transform 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
        z-index: 50;
    }

    .sidebar-header {
        padding: 30px 25px;
        display: flex;
        align-items: center;
        gap: 15px;
        background: linear-gradient(to bottom, rgba(255,255,255,0.1), transparent);
    }

    #navLinks {
        padding: 20px;
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 10px;
    }
    
    .nav-link {
        padding: 16px 20px;
        border-radius: 16px;
        display: flex;
        align-items: center;
        gap: 15px;
        color: var(--text-muted);
        cursor: pointer;
        font-weight: 600;
        transition: all 0.3s ease;
    }

    .nav-link:hover { 
        background: rgba(59, 130, 246, 0.1); 
        color: var(--accent); 
        transform: translateX(5px); 
    }
    .nav-link.active { 
        background: var(--accent); 
        color: white; 
        box-shadow: 0 10px 20px -5px var(--accent-glow); 
    }

    main {
        flex: 1;
        padding: 40px;
        overflow-y: auto;
        width: 100%;
        scroll-behavior: smooth;
    }

    .page { 
        display: none; 
        animation: fadeInScale 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
    }
    .page.active { 
        display: block; 
    }

    .dashboard-header {
        background: linear-gradient(120deg, #2563eb, #7c3aed, #db2777);
        background-size: 200% 200%;
        animation: gradientShift 6s ease infinite;
        color: white;
        padding: 40px;
        border-radius: 24px;
        margin-bottom: 40px;
        display: flex;
        align-items: center;
        gap: 30px;
        box-shadow: 0 20px 40px -10px rgba(37, 99, 235, 0.4);
        position: relative;
        overflow: hidden;
        transform: translateZ(0);
    }

    .dashboard-header::before {
        content: '';
        position: absolute;
        top: -50%; 
        left: -50%; 
        width: 200%;
        height: 200%;
        background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, transparent 60%);
        animation: float 10s infinite ease-in-out;
        pointer-events: none;
    }

    .dh-logo {
        width: 90px;
        height: 90px;
        object-fit: contain;
        background: rgba(255,255,255,0.9);
        border-radius: 20px;
        padding: 8px;
        box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        transform: rotate(-5deg);
        transition: transform 0.3s;
    }

    .dashboard-header:hover .dh-logo { 
        transform: rotate(0deg) scale(1.1); 
    }
    .dh-text h1 { 
        margin: 0; 
        font-size: 28px; 
        font-weight: 800; 
        letter-spacing: -0.5px; 
        text-shadow: 0 2px 10px rgba(0,0,0,0.2); 
    }
    .dh-text h2 { 
        margin: 5px 0 0; 
        font-size: 14px; 
        opacity: 0.9; 
        font-weight: 500; 
        text-transform: uppercase; 
        letter-spacing: 2px; 
    }
    
    .dh-welcome {
        margin-top: 15px;
        font-size: 14px;
        color: white;
        display: inline-flex;
        align-items: center;
        background: rgba(255, 255, 255, 0.2);
        padding: 6px 16px;
        border-radius: 50px;
        backdrop-filter: blur(5px);
        border: 1px solid rgba(255,255,255,0.3);
    }

    .card {
        background: var(--glass-bg);
        border-radius: 24px;
        padding: 25px;
        border: 1px solid var(--glass-border);
        margin-bottom: 25px;
        box-shadow: var(--card-shadow);
        backdrop-filter: blur(10px);
        transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.4s;
        transform-style: preserve-3d;
    }

    .card:hover { 
        transform: translateY(-8px) scale(1.01);
         box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.2); 
         z-index: 10; 
         border-color: var(--accent); }

    .grid-forms {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        gap: 25px;
    }

    input, select, textarea {
        width: 100%;
        padding: 12px 16px;
        border-radius: 12px;
        border: 1px solid var(--glass-border);
        background: rgba(255,255,255,0.5);
        color: var(--text-main);
        transition: 0.3s;
        font-family: inherit;
    }

    body.dark input, body.dark select, body.dark textarea { 
        background: rgba(0,0,0,0.3); 
        border-color: rgba(255,255,255,0.1); 
    }
    input:focus, select:focus, textarea:focus { 
        background: white; 
        border-color: var(--accent); 
        box-shadow: 0 0 0 3px var(--accent-glow); 
    }

    .table-container {
        overflow-x: auto;
        border-radius: 16px;
        background: rgba(255,255,255,0.3);
        border: 1px solid var(--glass-border);
    }

    table { 
        width: 100%; 
        border-collapse: collapse; 
        font-size: 14px; 
        color: var(--text-main); 
    }
    th { 
        background: rgba(0,0,0,0.03); 
        padding: 15px; 
        text-align: left; 
        color: var(--text-muted); 
        font-weight: 600; 
        white-space: nowrap;
    }
    td { 
        padding: 15px; 
        border-bottom: 1px solid rgba(0,0,0,0.05); 
        transition: background 0.2s; 
    }
    tr:hover td { 
        background: rgba(59, 130, 246, 0.05); 
    }

    .tag { 
        padding: 6px 12px; 
        border-radius: 20px; 
        font-size: 11px; 
        font-weight: 700; 
        text-transform: uppercase; 
        letter-spacing: 0.5px; 
    }
    .tag-p { 
        background: rgba(16, 185, 129, 0.15); 
        color: #10b981; 
    }
    .tag-a { 
        background: rgba(239, 68, 68, 0.15); 
        color: #ef4444; 
    }
    .tag-pend { 
        background: rgba(245, 158, 11, 0.15); 
        color: #f59e0b; 
    }

    .pie-chart {
        width: 70px; 
        height: 70px; 
        border-radius: 50%;
        background: conic-gradient(var(--accent) var(--p), rgba(0,0,0,0.1) 0);
        display: flex; 
        align-items: center; 
        justify-content: center;
        font-size: 12px; 
        font-weight: 700; 
        color: var(--text-main);
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        position: relative;
    }
    .pie-chart::after {
        content: attr(data-val);
        width: 54px; 
        height: 54px; 
        background: var(--glass-bg);
        border-radius: 50%; 
        display: flex; 
        align-items: center; 
        justify-content: center;
        box-shadow: inset 0 2px 5px rgba(0,0,0,0.05);
    }

    #mobileHeader {
        display: none;
        padding: 15px 20px;
        background: var(--glass-bg);
        backdrop-filter: blur(15px);
        border-bottom: 1px solid var(--glass-border);
        align-items: center;
        justify-content: space-between;
        position: sticky;
        top: 0;
        z-index: 99;
    }

    .sidebar-overlay {
        display: none;
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.5);
        z-index: 40;
        backdrop-filter: blur(5px);
        opacity: 0;
        transition: opacity 0.3s;
    }
    .sidebar-overlay.active { 
        display: block; 
        opacity: 1; 
    }

    .modal {
        display: none;
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.7);
        backdrop-filter: blur(8px);
        z-index: 2000;
        align-items: center;
        justify-content: center;
        padding: 20px;
        opacity: 0;
        transition: opacity 0.3s;
    }
    .modal[style*="display: flex"] { 
        opacity: 1; 
    }

    .modal-content {
        background: var(--glass-bg);
        width: 100%;
        max-width: 900px;
        padding: 30px;
        border-radius: 24px;
        position: relative;
        max-height: 85vh;
        overflow-y: auto;
        box-shadow: 0 25px 50px -12px rgba(0,0,0,0.5);
        border: 1px solid rgba(255,255,255,0.2);
        animation: fadeInScale 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }
    body.dark .modal-content { 
        background: #1e293b; 
        color: white; 
    }

    .close-modal {
        position: absolute; 
        right: 25px; 
        top: 20px;
        font-size: 24px; 
        cursor: pointer; 
        color: var(--text-muted);
        transition: 0.2s; 
        width: 32px; 
        height: 32px;
        display: flex; 
        align-items: center; 
        justify-content: center;
        border-radius: 50%; 
        background: rgba(0,0,0,0.05);
    }
    .close-modal:hover { 
        background: var(--danger); 
        color: white; 
        transform: rotate(90deg); 
    }

    .file-upload-box {
        border: 2px dashed var(--glass-border);
        padding: 30px;
        text-align: center;
        border-radius: 16px;
        background: rgba(255,255,255,0.2);
        transition: 0.3s;
        cursor: pointer;
    }
    .file-upload-box:hover { 
        border-color: var(--accent);
        background: rgba(59, 130, 246, 0.1); 
        transform: translateY(-2px); 
    }

    @media (max-width: 768px) {
        body { 
            flex-direction: column; 
            height: 100vh; 
            overflow: hidden; 
        }
        aside { 
            position: fixed; 
            inset: 0;
            width: 280px; 
            z-index: 200; 
            transform: translateX(-100%); 
            box-shadow: 10px 0 30px rgba(0,0,0,0.2); 
        }
        aside.active { 
            transform: translateX(0); 
        }
        #mobileHeader { 
            display: flex; 
        }
        main { 
            padding: 20px; 
            width: 100%; 
            overflow-y: auto; 
            height: 100%; 
            padding-bottom: 80px; 
        }
        .dashboard-header { 
            flex-direction: column; 
            text-align: center; 
            gap: 20px; 
            padding: 30px 20px; 
        }
        .dh-text h1 { 
            font-size: 22px; 
        }
        .grid-forms { 
            grid-template-columns: 1fr; 
            gap: 20px; 
        }
        .login-card { 
            width: 90%; 
            padding: 30px; 
        }
    }

    @media print {
        @page { 
            size: A4 landscape; 
            margin: 5mm; 
        }
        body { 
            background: white; 
            color: black; 
            -webkit-print-color-adjust: exact; print-color-adjust: exact; 
        }
        body * { 
            visibility: hidden; 
        }
        
        .no-print, .close-modal, .btn, .modal-content::-webkit-scrollbar, 
        #mobileHeader, .mobile-menu-btn, .sidebar-overlay,
        #sidebar, #authScreen, #guideModal, .modal { 
            display: none !important; 
        }

        body.printing-att #attModal {
            display: block !important; 
            visibility: visible; 
            position: absolute; 
            inset: 0; 
            background: white; 
            padding: 0;
        }
        body.printing-marks #marksModal {
            display: block !important; 
            visibility: visible; 
            position: absolute; 
            inset: 0; 
            background: white; 
            padding: 0;
        }

        .modal-content {
            box-shadow: none; 
            border: none; 
            width: 100%; 
            max-width: 100%; 
            padding: 0; 
            margin: 0; 
            background: white; 
            visibility: visible; 
            overflow: visible;
        }

        .printable-content, .printable-content * { visibility: visible; }
        
        .print-header { 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            position: relative; 
            margin-bottom: 10px; 
            padding-bottom: 15px; 
            border-bottom: 2px solid #000; 
        }
        .print-logo {
            position: absolute;
            left: 0; 
            top: 0; 
            width: 90px; 
            height: 90px; 
            object-fit: contain; 
        }
        .print-text { 
            text-align: center; 
            width: 100%; 
        }
        .print-text h1 { 
            font-size: 24px; 
            font-weight: 800; 
            text-transform: uppercase; 
            margin: 0 0 5px 0; 
            color: black; 
            font-family: Arial, sans-serif; 
            letter-spacing: 0.5px; 
        }
        .print-text p { 
            font-size: 16px; 
            margin: 0; 
            color: black; 
            font-weight: 400; 
        }

        .print-meta-list { 
            margin-bottom: 20px; 
            font-size: 14px; 
            color: black; 
            font-family: Arial, sans-serif; 
        }
        .print-meta-row { 
            margin-bottom: 5px; 
            display: flex; 
        }
        .print-label { 
            font-weight: 900; 
            width: 150px; 
            font-size: 15px; 
        }
        .print-value { 
            font-weight: 400; 
            font-size: 15px; 
        }

        .print-table-wrapper { 
            width: 100%; 
            border: none; 
        }
        .print-table { 
            width: 100%; 
            border-collapse: collapse; 
            font-size: 11px; 
            font-family: Arial, sans-serif; 
        }
        .print-table th, .print-table td { 
            border: 1px solid #000 !important; 
            padding: 4px 2px; 
            text-align: center; 
            color: black; 
            vertical-align: middle; 
        }
        .print-table th { 
            background-color: #f0f0f0 !important; 
            font-weight: 700; 
            text-transform: uppercase; 
        }
        .print-table tr { 
            page-break-inside: avoid; 
        }
        .print-table td:nth-child(2) { 
            text-align: left; 
            padding-left: 5px; 
            font-weight: 600; 
        }
        }
        .form-section {
        background: rgba(0,0,0,0.02);
        border: 1px solid var(--glass-border);
        border-radius: 16px;
        padding: 20px;
        margin-bottom: 20px;
        }

.form-section-title {
    font-size: 14px;
    font-weight: 700;
    color: var(--accent);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 15px;
    border-bottom: 1px solid rgba(0,0,0,0.05);
    padding-bottom: 8px;
}

.grid-forms-3 {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 15px;
}

.form-group label {
    display: block;
    font-size: 12px;
    font-weight: 600;
    color: var(--text-muted);
    margin-bottom: 5px;
}

.doc-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
    gap: 15px;
}

.doc-upload-item {
    background: white;
    border: 1px dashed var(--text-muted);
    border-radius: 8px;
    padding: 15px;
    text-align: center;
    position: relative;
    transition: 0.3s;
}

.doc-upload-item:hover {
    border-color: var(--accent);
    background: rgba(59, 130, 246, 0.05);
}

.doc-upload-item input[type="file"] {
    position: absolute;
    inset: 0;
    opacity: 0;
    cursor: pointer;
    width: 100%;
}

.doc-icon {
    font-size: 24px;
    color: var(--text-muted);
    margin-bottom: 8px;
}

.profile-header-card {
    background: linear-gradient(135deg, var(--accent), #2563eb);
    padding: 30px;
    border-radius: 20px;
    color: white;
    display: flex;
    align-items: center;
    gap: 20px;
    margin-bottom: 25px;
}

.ph-avatar {
    width: 70px;
    height: 70px;
    background: white;
    color: var(--accent);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 28px;
    font-weight: 800;
}

.tab-nav {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
    border-bottom: 1px solid var(--glass-border);
    padding-bottom: 10px;
}

.tab-btn {
    background: none;
    border: none;
    padding: 10px 20px;
    font-weight: 600;
    color: var(--text-muted);
    cursor: pointer;
    border-radius: 8px;
    transition: 0.2s;
}

.tab-btn.active {
    background: var(--accent);
    color: white;
}

.info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
}

.info-item label {
    font-size: 11px;
    text-transform: uppercase;
    color: var(--text-muted);
    display: block;
    font-weight: 700;
}
.info-item div {
    font-size: 15px;
    font-weight: 500;
    color: var(--text-main);
    padding: 5px 0;
    border-bottom: 1px solid rgba(0,0,0,0.05);
}
.ishala-card {
    background: white;
    border: 1px solid #eee;
    border-radius: 8px;
    padding: 24px;
    transition: 0.3s;
    position: relative;
    box-shadow: 0 2px 5px rgba(0,0,0,0.05);
}

.ishala-card:hover {
    box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    border-color: #00A5EC; 
}

.ishala-head {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 15px;
}

.ishala-role {
    font-size: 18px;
    font-weight: 700;
    color: #333;
    margin-bottom: 4px;
}

.ishala-company {
    font-size: 14px;
    color: #666;
}

.ishala-logo {
    width: 45px;
    height: 45px;
    object-fit: contain;
    border-radius: 4px;
    background: #fff;
    border: 1px solid #f0f0f0;
    padding: 2px;
}

.ishala-details {
    display: flex;
    gap: 20px;
    margin-bottom: 20px;
    font-size: 13px;
    color: #444;
    flex-wrap: wrap;
}

.ishala-item {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.ishala-label {
    font-size: 11px;
    color: #888;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.ishala-value {
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 6px;
}

.ishala-tags {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
}

.ishala-tag {
    background: #f8f8f8;
    color: #666;
    padding: 4px 10px;
    border-radius: 4px;
    font-size: 12px;
}

.ishala-footer {
    border-top: 1px solid #f0f0f0;
    padding-top: 15px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.ishala-time {
    font-size: 12px;
    color: #28b661; 
    background: #eafff0;
    padding: 4px 8px;
    border-radius: 4px;
}
.iframe-full-height {
    width: 100%;
    height: calc(90vh - 60px);
    border: none;
    border-radius: 0 0 16px 16px;
    background: white;
    display: block;
}

#aboutCollegeModal .modal-content {
    padding: 0 !important;
    background: white;
    overflow: hidden;
}
.quick-access-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: 15px;
    margin-bottom: 25px;
}

.qa-card {
    background: white;
    border: 1px solid var(--glass-border);
    border-radius: 16px;
    padding: 20px 15px;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 10px;
}

.qa-card:hover {
    transform: translateY(-5px);
    border-color: var(--accent);
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
}

.qa-icon {
    width: 45px;
    height: 45px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
    margin-bottom: 5px;
}

.browser-modal-content {
    width: 98%;
    height: 95vh;
    max-width: 1400px;
    padding: 0;
    background: #fff;
    border-radius: 12px;
    overflow: hidden;
    display: flex;
    flex-direction: column;
}

.browser-header {
    padding: 12px 20px;
    background: #f1f5f9;
    border-bottom: 1px solid #e2e8f0;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.browser-title {
    font-weight: 700;
    color: #0f172a;
    display: flex;
    align-items: center;
    gap: 10px;
}

.browser-controls {
    display: flex;
    gap: 10px;
}

.browser-frame {
    flex: 1;
    width: 100%;
    border: none;
    background: white;
}
    
    body.dark .qa-card {
        background: rgba(30, 41, 59, 0.6); 
        border-color: rgba(255, 255, 255, 0.1); 
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.5);
    }

    body.dark .qa-card:hover {
        background: rgba(30, 41, 59, 1); 
        border-color: var(--accent);
        transform: translateY(-5px);
    }

    body.dark .qa-card div {
        color: #f8fafc !important; 
    }

    body.dark .qa-icon {
        border: 1px solid rgba(255,255,255,0.05);
        background: rgba(0, 0, 0, 0.2) !important; 
    }

.animate-pop-in {
    opacity: 0;
    animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
}

@keyframes popIn {
    0% { opacity: 0; transform: scale(0.9) translateY(20px); }
    100% { opacity: 1; transform: scale(1) translateY(0); }
}

.btn {
    position: relative;
    overflow: hidden;
    transform: translateZ(0);
}

.ripple {
    position: absolute;
    border-radius: 50%;
    transform: scale(0);
    animation: ripple 0.6s linear;
    background-color: rgba(255, 255, 255, 0.4);
}

@keyframes ripple {
    to { transform: scale(4); opacity: 0; }
}

.tag-p, .tag-a, .tag-pend {
    position: relative;
    overflow: hidden;
}

.tag-p::after {
    content: '';
    position: absolute;
    top: 0; left: -100%;
    width: 50%; height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
    animation: shine 3s infinite;
}

@keyframes shine {
    0% { left: -100%; }
    20% { left: 200%; }
    100% { left: 200%; }
}
</style>
</head>
<body>

    <div class="sidebar-overlay" onclick="toggleSidebar()"></div>

    <div id="authScreen">
        <div class="login-card">
            <img src="https://raw.githubusercontent.com/shubhamsanap1092-dot/SHUBHAM-/main/sinhgad%20logo.jpg" 
            style="width:110px; 
            border-radius:50%; 
            margin-bottom:25px; 
            box-shadow: 0 10px 25px rgba(0,0,0,0.2); 
            border: 4px solid white;">
            <h2 style="
            color:var(--text-main); 
            margin:0; 
            font-size: 
            26px; font-weight: 800;">Welcome Back</h2>
            <p style="color:var(--text-muted); 
            font-size:15px; 
            margin-bottom:35px;">Sign in to SITS Attendance Portal</p>
            <input type="text" 
            class="login-input" 
            id="loginID"
            placeholder="Email or Phone Number" required>
            <input type="password" 
            class="login-input" 
            id="loginPass" 
            placeholder="Password" required>
            <button 
            class="btn btn-p" 
            style="width:100%; 
            padding:14px; 
            font-size: 16px; 
            margin-top: 10px;" 
            onclick="handleLogin()">Login Securely</button>
            <div style="margin-top:30px; 
            font-size:12px; 
            color:var(--text-muted);">
                SITS Pune Attendance System<br>
                <span style="background: rgba(59, 130, 246, 0.1); 
                color: var(--accent); 
                padding: 4px 10px; 
                border-radius: 12px; 
                -weight: 600;"
                >Developed by Shubham Sanap</span>
            </div>
        </div>
    </div>

    <aside id="sidebar" 
    style="display:none">
        <div class="sidebar-header">
            <img src="https://raw.githubusercontent.com/shubhamsanap1092-dot/SHUBHAM-/main/sinhgad%20logo.jpg" 
            style="
            width:45px; 
            border-radius:10px; 
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);">
            <div>
                <h3 style="
                margin:0; 
                font-size:18px; 
                font-weight: 700;">SITS Pune</h3>
                <span style="
                font-size:11px; 
                color:var(--text-muted); 
                font-weight: 500;">Academic Portal</span>
            </div>
        </div>
        <div id="navLinks"></div>
        <div style="padding: 0 20px;">
            <button class="btn btn-w" 
            style="width:100%; 
            justify-content:flex-start; 
            margin-top:10px;" 
            onclick="openModal('guideModal')">
                <i class="fa fa-question-circle"></i> Help Guide
            </button>
        </div>
        <div style="padding:25px; 
        margin-top:auto; 
        border-top:1px solid var(--glass-border);">
            <div style="
            display:flex; 
            justify-content:space-between; 
            align-items:center; 
            margin-bottom:20px;">
                <span style="font-size:13px; 
                font-weight:600; 
                color: var(--text-muted);">Dark Mode</span>

                <div onclick="toggleTheme()" 
                style="
                width: 44px; 
                height: 24px; 
                background: #cbd5e1; 
                border-radius: 20px; 
                position: relative; 
                cursor: pointer; 
                transition: 0.3s;">

                    <div style="
                        width: 18px; 
                        height: 18px; 
                        background: white; 
                        border-radius: 50%; 
                        position: absolute; 
                        top: 3px; 
                        left: 3px; 
                        transition: 0.3s;"></div>
                </div>
            </div>
            <div style="
            display:flex; 
            align-items:center;
             gap:12px; 
             background: rgba(0,0,0,0.03); 
             padding: 10px; 
             border-radius: 12px;">
                <div style="
                    width:38px; 
                    height:38px; 
                    background:linear-gradient(135deg, #3b82f6, #2563eb); 
                    border-radius:50%; 
                    color:white; 
                    display:flex; 
                    align-items:center; 
                    justify-content:center; 
                    font-weight: 700;" 
                    id="sideAvatar">U</div>
                <div style="flex:1;">
                    <div id="sideName" 
                    style="font-size:14px; font-weight:700;">User</div>
                    <div id="sideRole" 
                    style="font-size:11px; color:var(--text-muted);">Role</div>
                </div>
                <i class="fa fa-power-off" 
                style="color:var(--danger); cursor:pointer; font-size: 16px; padding: 5px;" 
                onclick="location.reload()"></i>
            </div>
        </div>
    </aside>

    <main id="mainContent" style="display:none">

        <div id="mobileHeader">
            <button class="mobile-menu-btn" 
            style="
                background:none; 
                border:none; 
                font-size:20px; 
                color:var(--text-main);" 
                onclick="toggleSidebar()">
                
                <i class="fa fa-bars"></i>
            </button>
            <div style="font-weight:700; 
            color:var(--primary-dark); 
            font-size: 18px;">SITS Portal</div>
            <img src="https://raw.githubusercontent.com/shubhamsanap1092-dot/SHUBHAM-/main/sinhgad%20logo.jpg" 
            style="width:35px; border-radius:8px;">
        </div>

        <div class="dashboard-header">
            <img src="https://raw.githubusercontent.com/shubhamsanap1092-dot/SHUBHAM-/main/sinhgad%20logo.jpg" 
            class="dh-logo">
            <div class="dh-text">
                <h1>Sinhgad Institute of Technology and Science</h1>
                <h2>Narhe, Pune - 411041</h2>
                <div class="dh-welcome">
                    <i class="fa fa-user-circle" 
                    style="margin-right: 8px;">
                </i> Welcome back, <span 
                id="dashName" 
                style="font-weight: 700; 
                margin-left: 4px;">User</span>
                </div>
            </div>
        </div>

        <div id="noticeWidget" 
        class="card" 
        style="display:none; 
        border-left: 5px solid var(--warning); 
        background: linear-gradient(to right, rgba(245, 158, 11, 0.1), 
        transparent);">
            <h4 style="
            margin:0 0 8px 0; 
            display:flex; 
            align-items:center; 
            gap: 8px; 
            color: #b45309;">
                <i class="fa fa-bullhorn">
                </i> Latest Announcement
            </h4>
            <p id="noticeText" 
            style="
            margin:0; 
            font-size:14px; 
            color:#92400e; 
            font-weight: 500;"></p>
            <small id="noticeDate" 
            style="color:#b45309; 
            font-size:11px; 
            display:block; 
            margin-top:8px; 
            opacity: 0.8;">
            </small>
        </div>
<div id="adminPage" class="page">
    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:25px; flex-wrap:wrap; gap:15px;">
        <h2 style="font-size: 24px; color: var(--text-main);">
            <i class="fa fa-user-shield" style="color: var(--accent); margin-right: 10px;"></i> Admin Control
        </h2>
        <div style="display:flex; gap:12px;">
            <button class="btn btn-dark" onclick="openTimetableModal()">
                <i class="fa fa-calendar-alt"></i> Timetable
            </button>
            <button class="btn btn-p" onclick="openModal('admissionModal')">
                <i class="fa fa-user-plus"></i> New Admission
            </button>
            <button class="btn btn-p" onclick="openModal('postJobModal')">
                <i class="fa fa-plus-circle"></i> Post Internship
            </button>
        </div>
    </div>

    <div class="grid-forms" style="margin-bottom:25px;">
        <div class="card">
            <h3 style="margin-top:0; border-bottom:1px solid var(--glass-border); padding-bottom:10px;">
                <i class="fa fa-filter"></i> Student Registry
            </h3>
            <div class="grid-forms" style="gap: 15px;">
                <div>
                    <label class="form-label">Year</label>
                    <select id="aYear" onchange="handleYearChange('aYear','aBranch')">
                        <option value="1ST YEAR">1st Year</option>
                        <option value="2ND YEAR">2nd Year</option>
                        <option value="3RD YEAR">3rd Year</option>
                        <option value="4TH YEAR">4th Year</option>
                    </select>
                </div>
                <div>
                    <label class="form-label">Branch</label>
                    <select id="aBranch" onchange="refreshAdminView()"></select>
                </div>
                <div>
                    <label class="form-label">Division</label>
                    <select id="aDiv" onchange="refreshAdminView()"></select>
                </div>
            </div>
            <div class="table-container" style="max-height:400px; margin-top:15px;">
                <table id="adminStudentTable"></table>
            </div>
        </div>

        <div class="card">
            <h3 style="margin-top:0;">Pending Actions</h3>
            <button class="btn btn-w" style="width:100%; margin-bottom:15px;" onclick="openModal('noticeModal')">
                <i class="fa fa-bullhorn"></i> Post Notice
            </button>
            <h4 style="margin:0 0 10px 0;">Leave Requests</h4>
            <div class="table-container" style="max-height:300px;">
                <table id="adminLeaveTable"></table>
            </div>
        </div>
    </div>

    <h4 style="margin:20px 0 10px 0; border-top:1px solid rgba(0,0,0,0.05); padding-top:15px;">
        <i class="fa fa-bug" style="color:var(--danger);"></i> Reported Issues
    </h4>
    <div class="table-container" style="max-height:250px;">
        <table id="adminIssueTable">
            <thead>
                <tr>
                    <th>Student</th>
                    <th>Category</th>
                    <th>Issue</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
</div>

<div id="admissionModal" class="modal">
    <div class="modal-content" style="max-width:900px;">
        <span class="close-modal" onclick="closeModal('admissionModal')">&times;</span>
        <div class="modal-header">
            <h2 style="margin:0;"><i class="fa fa-university"></i> New Student Admission</h2>
            <p style="margin:0; color:var(--text-muted);">Fill in the official details below.</p>
        </div>

        <div class="form-section">
            <div class="form-section-title">Academic Details</div>
            <div class="grid-forms-3">
                <div class="form-group">
                    <label>Academic Year</label>
                    <select id="admYear" onchange="handleAdmissionYear()">
                        <option value="1ST YEAR">1st Year</option>
                        <option value="2ND YEAR">2nd Year</option>
                        <option value="3RD YEAR">3rd Year</option>
                        <option value="4TH YEAR">4th Year</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Branch / Dept</label>
                    <select id="admBranch">
                        <option value="COMBINE">COMBINE</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Division</label>
                    <select id="admDiv">
                        <option>Div-1</option><option>Div-2</option><option>Div-3</option>
                        <option>Div-4</option><option>Div-5</option><option>Div-6</option>
                        <option>Div-7</option><option>Div-8</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Roll Number</label>
                    <input type="text" id="admRoll" placeholder="e.g. 45">
                </div>
                <div class="form-group">
                    <label>Fee Status</label>
                    <select id="admFee">
                        <option value="Pending">Fees Pending</option>
                        <option value="Paid">Fees Paid</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="form-section">
            <div class="form-section-title">Personal Information</div>
            <div class="grid-forms-3">
                <div class="form-group">
                    <label>Student Full Name</label>
                    <input type="text" id="admName" placeholder="Surname First Name Middle">
                </div>
                <div class="form-group">
                    <label>Father's Name</label>
                    <input type="text" id="admFather" placeholder="Father's Full Name">
                </div>
                <div class="form-group">
                    <label>Mother's Name</label>
                    <input type="text" id="admMother" placeholder="Mother's First Name">
                </div>
                <div class="form-group">
                    <label>Father's Occupation</label>
                    <input type="text" id="admOcc" placeholder="e.g. Service / Business">
                </div>
                <div class="form-group" style="grid-column: span 2;">
                    <label>Permanent Address</label>
                    <input type="text" id="admAddr" placeholder="Full Residential Address">
                </div>
            </div>
        </div>

        <div class="form-section">
            <div class="form-section-title">Contact Details</div>
            <div class="grid-forms-3">
                <div class="form-group">
                    <label>Student Mobile</label>
                    <input type="text" id="admPhone" placeholder="10 Digit Mobile No">
                </div>
                <div class="form-group">
                    <label>Student Email</label>
                    <input type="email" id="admEmail" placeholder="student@example.com">
                </div>
                <div class="form-group">
                    <label>Parent Contact</label>
                    <input type="text" id="admParPhone" placeholder="Parent Mobile No">
                </div>
                <div class="form-group">
                    <label>Emergency Contact</label>
                    <input type="text" id="admEmgPhone" placeholder="Emergency No">
                </div>
            </div>
        </div>

        <div class="form-section">
            <div class="form-section-title">Document Uploads</div>
            <div class="doc-grid" id="docUploadContainer">
                </div>
        </div>

        <div style="margin-top:30px; display:flex; gap:15px; justify-content:flex-end;">
            <button class="btn btn-d" onclick="closeModal('admissionModal')">Cancel</button>
            <button class="btn btn-p" onclick="submitAdmission()">
                <i class="fa fa-check-circle"></i> Confirm Admission
            </button>
        </div>
    </div>
</div>

<div id="profileModal" class="modal">
    <div class="modal-content" style="max-width:800px;">
        <span class="close-modal" onclick="closeModal('profileModal')">&times;</span>
        <div class="profile-header-card">
            <div class="ph-avatar" id="profAvatar">U</div>
            <div>
                <h2 id="profName" style="margin:0;">Student Name</h2>
                <p id="profSubtitle" style="margin:5px 0 0; opacity:0.8;">Branch | Year | Roll</p>
            </div>
        </div>

        <div class="tab-nav">
            <button class="tab-btn active" onclick="switchProfileTab('tab-info')">Personal Info</button>
            <button class="tab-btn" onclick="switchProfileTab('tab-docs')">Documents</button>
        </div>

        <div id="tab-info" class="prof-tab active">
            <div class="info-grid" id="profInfoGrid">
                </div>
        </div>

        <div id="tab-docs" class="prof-tab" style="display:none;">
            <div class="table-container">
                <table id="profDocTable" style="width:100%;">
                    <thead><tr><th>Document Name</th><th>Status</th><th>Action</th></tr></thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </div>
</div>

        <div id="teacherPage" class="page">
    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:30px;">
        <h2 style="font-size: 24px; margin:0;">
            <i class="fa fa-chalkboard-teacher" 
            style="color: var(--accent); margin-right: 10px;"></i> Faculty Dashboard
        </h2>
        <div id="clockDisplay" style="font-weight:800; color:var(--accent); font-size: 20px; 
        background: rgba(59, 130, 246, 0.1); padding: 8px 16px; border-radius: 12px;"></div>
    </div>

    <div class="grid-forms" style="margin-bottom:25px; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));">
        <div class="card" onclick="openAttendanceModal()" 
        style="cursor:pointer; text-align:center; display:flex; flex-direction:column; align-items:center; 
        justify-content:center; min-height:140px; margin-bottom:0;">
            <div style="width:50px; height:50px; background:rgba(59,130,246,0.1); border-radius:50%; 
            display:flex; align-items:center; justify-content:center; margin-bottom:12px;">
                <i class="fa fa-user-check" style="font-size:24px; color:var(--accent);"></i>
            </div>
            <h3 style="margin:0; font-size:15px;">Attendance</h3>
        </div>

        <div class="card" onclick="openMarksModal()" style="cursor:pointer; text-align:center; 
        display:flex; flex-direction:column; align-items:center; justify-content:center; min-height:140px; margin-bottom:0;">
            <div style="width:50px; height:50px; background:rgba(16,185,129,0.1); border-radius:50%; 
            display:flex; align-items:center; justify-content:center; margin-bottom:12px;">
                <i class="fa fa-chart-bar" style="font-size:24px; color:var(--success);"></i>
            </div>
            <h3 style="margin:0; font-size:15px;">Marks Entry</h3>
        </div>

        <div class="card" onclick="openModal('lmsModal')" style="cursor:pointer; text-align:center; 
        display:flex; flex-direction:column; align-items:center; justify-content:center; min-height:140px; margin-bottom:0;">
            <div style="width:50px; height:50px; background:rgba(245,158,11,0.1); border-radius:50%; 
            display:flex; align-items:center; justify-content:center; margin-bottom:12px;">
                <i class="fa fa-cloud-upload-alt" style="font-size:24px; color:var(--warning);"></i>
            </div>
            <h3 style="margin:0; font-size:15px;">LMS Upload</h3>
        </div>

        <div class="card" onclick="openTimetableModal()" style="cursor:pointer; text-align:center; 
        display:flex; flex-direction:column; align-items:center; justify-content:center; min-height:140px; margin-bottom:0;">
            <div style="width:50px; height:50px; background:rgba(99,102,241,0.1); border-radius:50%; 
            display:flex; align-items:center; justify-content:center; margin-bottom:12px;">
                <i class="fa fa-calendar-day" style="font-size:24px; color:#6366f1;"></i>
            </div>
            <h3 style="margin:0; font-size:15px;">Schedule</h3>
        </div>
    </div>

    <div class="grid-forms" style="margin-bottom: 25px;">
        <div class="card" style="margin-bottom:0;">
            <h4 style="margin-top:0; border-bottom: 1px solid rgba(0,0,0,0.05); padding-bottom: 10px; margin-bottom: 15px;">
                <i class="fa fa-filter"></i> Class Selection
            </h4>
            <div class="grid-forms" style="gap:15px;">
                <div>
                    <label style="font-size:12px; font-weight:bold; color:var(--text-muted);">Year</label>
                    <select id="tYear" onchange="handleYearChange('tYear','tBranch')">
                        <option value="1ST YEAR">1st Year</option>
                        <option value="2ND YEAR">2nd Year</option>
                        <option value="3RD YEAR">3rd Year</option>
                        <option value="4TH YEAR">4th Year</option>
                    </select>
                </div>
                <div>
                    <label style="font-size:12px; font-weight:bold; color:var(--text-muted);">Branch</label>
                    <select id="tBranch"></select>
                </div>
                <div>
                    <label style="font-size:12px; font-weight:bold; color:var(--text-muted);">Division</label>
                    <select id="tDiv"></select>
                </div>
                <div>
                    <label style="font-size:12px; font-weight:bold; color:var(--text-muted);">Subject</label>
                    <select id="tSub"></select>
                </div>
            </div>
        </div>

        <div class="card" style="margin-bottom:0;">
            <h3 style="margin-top:0; font-size:16px; border-bottom: 1px solid rgba(0,0,0,0.05); padding-bottom: 10px; margin-bottom: 15px;">
                <i class="fa fa-envelope-open-text" style="color:var(--accent);"></i> Pending Leaves
            </h3>
            <div class="table-container" style="max-height: 140px;">
                <table id="teacherLeaveTable"></table>
            </div>
        </div>
    </div>

    <div class="card">
        <h3 style="margin-top:0; border-bottom:1px solid rgba(0,0,0,0.05); padding-bottom:10px; margin-bottom:15px;">
            <i class="fa fa-users"></i> Student List & Documents
        </h3>
        <div class="table-container" style="max-height: 400px;">
            <table style="width:100%;">
                <thead>
                    <tr>
                        <th style="width:50px;">Roll</th>
                        <th>Student Details</th>
                        <th>Uploads</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody id="teacherStudentTable">
                </tbody>
            </table>
        </div>
    </div>
</div>

   <div id="studentPage" class="page">
    <div style="margin-bottom: 25px; display: flex; align-items: center; gap: 15px; flex-wrap: wrap;">
        <span id="stFeeBadge" class="tag" style="font-size: 14px; padding: 8px 16px;">Loading...</span>
        <div style="height: 40px; border-left: 2px solid var(--glass-border);"></div>
        <p id="stDetails" style="margin:0; color:var(--text-muted); font-size:15px; font-weight: 500;">Loading...</p>
    </div>

    <h3 style="margin: 0 0 15px 0; font-size: 16px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px;">
        Academic & Utility Hub
    </h3>
    <div class="quick-access-grid">
        <div class="qa-card" onclick="openInAppBrowser('https://www.unipune.ac.in/', 'SPPU University Login')">
            <div class="qa-icon" style="background: rgba(249, 115, 22, 0.1); color: #f97316;">
                <i class="fa fa-university"></i>
            </div>
            <div style="font-weight: 600; font-size: 13px;">University Login</div>
        </div>

        <div class="qa-card" onclick="openInAppBrowser('http://onlineresults.unipune.ac.in/', 'Exam Results')">
            <div class="qa-icon" style="background: rgba(16, 185, 129, 0.1); color: #10b981;">
                <i class="fa fa-trophy"></i>
            </div>
            <div style="font-weight: 600; font-size: 13px;">Exam Results</div>
        </div>

        <div class="qa-card" onclick="openInAppBrowser('https://www.brainkart.com/menu/engineering/', 'Study Material')">
            <div class="qa-icon" style="background: rgba(59, 130, 246, 0.1); color: #3b82f6;">
                <i class="fa fa-book-reader"></i>
            </div>
            <div style="font-weight: 600; font-size: 13px;">Study Material</div>
        </div>

        <div class="qa-card" onclick="openInAppBrowser('https://sinhgad.edu/', 'College Website')">
            <div class="qa-icon" style="background: rgba(139, 92, 246, 0.1); color: #8b5cf6;">
                <i class="fa fa-globe"></i>
            </div>
            <div style="font-weight: 600; font-size: 13px;">College Site</div>
        </div>
        
        <div class="qa-card" onclick="openInAppBrowser('http://www.unipune.ac.in/university_files/syllabi.htm', 'Syllabus')">
            <div class="qa-icon" style="background: rgba(236, 72, 153, 0.1); color: #ec4899;">
                <i class="fa fa-list-alt"></i>
            </div>
            <div style="font-weight: 600; font-size: 13px;">Syllabus</div>
        </div>
        <div class="qa-card" onclick="openStudentMessages()">
            <div class="qa-icon" style="background: rgba(139, 92, 246, 0.1); color: #8b5cf6;">
                <i class="fa fa-envelope"></i>
            </div>
            <div style="font-weight: 600; font-size: 13px;">
                Messages <span id="msgBadge" class="tag tag-a" style="font-size:10px; padding:2px 6px; display:none; border-radius:10px;">0</span>
            </div>
        </div>
    </div>

    <div class="grid-forms">
        <div class="card">
            <div style="display:flex; justify-content:space-between; align-items: center; margin-bottom: 15px;">
                <h3 style="margin:0;">Attendance</h3>
                <div class="pie-chart" id="stAttChart" style="--p:0deg;" data-val="0%"></div>
            </div>
            <div class="table-container" style="max-height:220px;">
                <table id="stAttTable">
                    <thead>
                        <tr><th>Date</th><th>Subject</th><th>Status</th></tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
        
        <div class="card">
            <h3 style="margin-top:0;">Quick Actions</h3>
            <div style="display: flex; flex-direction: column; gap: 10px;">
                <button class="btn btn-p" style="width:100%;" onclick="openTimetableModal()">
                    <i class="fa fa-calendar-alt"></i> View Timetable
                </button>
                <button class="btn btn-s" style="width:100%" onclick="openModal('applyLeaveModal')">
                    <i class="fa fa-paper-plane"></i> Apply Leave
                </button>
                <button class="btn btn-d" style="width:100%; margin-top:10px;" onclick="openModal('reportIssueModal')">
                    <i class="fa fa-exclamation-triangle"></i> Report Issue
                </button>
            </div>
            <div style="margin-top:15px; text-align: center; font-weight: 500;" id="stLeaveStatus"></div>
        </div>
    </div>

    <div class="grid-forms" style="margin-top:25px;">
        <div class="card">
            <h3 style="margin-top:0;">Exam Marks</h3>
            <div class="table-container">
                <table id="stGradesTable">
                    <thead><tr><th>Subject</th><th>Exam</th><th>Marks</th></tr></thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
        <div class="card">
            <h3 style="margin-top:0;">LMS Resources</h3>
            <div class="table-container" style="max-height: 220px;">
                <table id="stLmsTable">
                    <thead><tr><th>Title</th><th>Type</th><th>Action</th></tr></thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </div>

    <div class="card">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
            <h3 style="margin:0;">My Documents</h3>
            <button class="btn btn-p" style="padding:6px 12px; font-size:12px;" onclick="openStDocModal()">
                <i class="fa fa-plus"></i> Upload
            </button>
        </div>
        <div class="table-container" style="max-height: 220px;">
            <table id="stSelfDocTable">
                <thead><tr><th>Document Type</th><th>File Name</th><th>Status</th></tr></thead>
                <tbody></tbody>
            </table>
        </div>
    </div>
</div>
        <div id="placementPage" class="page">
    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:25px;">
        <h2 style="font-size: 24px; margin:0;">
            <i class="fa fa-briefcase" style="color: var(--accent); margin-right: 10px;"></i> Training & Placement
        </h2>
        <span class="tag tag-p" style="font-size:14px;">Year 2025-26</span>
    </div>

    <div class="grid-forms" style="margin-bottom:20px;">
        <input type="text" id="jobSearch" placeholder="Search Company or Role..." onkeyup="renderJobs()">
        <select id="jobTypeFilter" onchange="renderJobs()">
            <option value="All">All Types</option>
            <option value="Internship">Internship</option>
            <option value="Full Time">Full Time</option>
        </select>
    </div>

    <div class="job-grid" id="jobContainer" 
    style="display:grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px;">
        </div>
</div>
    </main>
<div id="submitAssignmentModal" 
class="modal">
    <div class="modal-content" 
    style="max-width:500px;">
        <span class="close-modal" 
        onclick="closeModal('submitAssignmentModal')">&times;</span>
        <h2 style="margin-top:0;">
            <i class="fa fa-upload">
            </i> Submit Assignment</h2>
        <p id="submitTargetTitle" style="color:var(--text-muted); font-size:14px; margin-bottom:20px;">
            Submitting for: <span style="font-weight:700; color:var(--text-main);">...</span>
        </p>

        <div class="grid-forms" 
        style="display: flex; flex-direction: column; gap: 15px;">
            <input type="hidden" id="submitLmsId">

            <label style="font-size:12px; font-weight:700; color:var(--text-muted);">YOUR WORK LINK</label>
            <input type="text" 
            id="submitLink" 
            placeholder="Paste Google Drive / GitHub Link">
            
            <div style="text-align: center; color: var(--text-muted); font-size: 13px; font-weight: 500;">- OR -</div>
            
            <div class="file-upload-box">
                <i class="fa fa-file-pdf" 
                style="font-size: 32px; color: var(--danger); margin-bottom: 10px;"></i>
                <br>
                <input type="file" id="submitFileLocal" 
                style="width: 100%; margin-top: 10px;">
                <small style="color: var(--text-muted);">Upload PDF / Doc</small>
            </div>
            
            <button class="btn btn-p" onclick="saveAssignmentSubmission()">
                <i class="fa fa-paper-plane"></i> Turn In
            </button>
        </div>
    </div>
</div>
    <div id="attModal" class="modal" 
    style="display:none; flex-direction:column;">
        <div class="modal-content">
            <span class="close-modal no-print" 
            onclick="closeModal('attModal')">&times;</span>
            <h2 class="no-print" 
            style="margin-top:0;">Mark Attendance & Ledger</h2>
            <div class="grid-forms no-print" 
            style="margin-bottom:25px; padding-bottom: 20px; border-bottom: 1px solid var(--glass-border);">
                <input type="date" 
                id="attDate">
                <input type="text" 
                id="absentRolls" 
                placeholder="Absent Roll Nos (e.g. 1, 5, 12)">
                <button class="btn btn-p" 
                onclick="saveAttendance()">Save Attendance</button>
            </div>
            <div style="display:flex; gap:15px; margin-bottom:15px; flex-wrap:wrap; align-items: flex-end;" class="no-print">
                <div style="flex:1;">
                    <label style="font-size:12px; font-weight:600; color:var(--text-muted);">Filter Month</label>
                    <select id="viewMonth" onchange="renderAttendanceLedger()">
                        <option value="0">January</option>
                        <option value="1">February</option>
                        <option value="2">March</option>
                        <option value="3">April</option>
                        <option value="4">May</option>
                        <option value="5">June</option>
                        <option value="6">July</option>
                        <option value="7">August</option>
                        <option value="8">September</option>
                        <option value="9">October</option>
                        <option value="10">November</option>
                        <option value="11">December</option>
                    </select>
                </div>
                <div style="display:flex; gap:10px;">
                    <button class="btn btn-e" 
                    onclick="exportToExcel('ledgerTable', 'Attendance_Ledger')">
                        <i class="fa fa-file-excel"></i> Excel
                    </button>
                    <button class="btn btn-s" 
                    onclick="printAttendance()">
                        <i class="fa fa-print"></i> Print
                    </button>
                </div>
            </div>

            <div id="printableArea" class="printable-content">
                <div class="print-header">
                    <img src="https://raw.githubusercontent.com/shubhamsanap1092-dot/SHUBHAM-/main/sinhgad%20logo.jpg" 
                    class="print-logo">
                    <div class="print-text">
                        <h1>Sinhgad Institute of Technology and Science</h1>
                        <p>Narhe, Pune - 411041 | Academic Attendance Record</p>
                    </div>
                </div>
                <div class="print-meta-list">
                    <div class="print-meta-row">
                        <span class="print-label">Department</span>
                        <span class="print-value" id="pBranch">IT</span>
                    </div>
                    <div class="print-meta-row">
                        <span class="print-label">Year</span>
                        <span class="print-value" id="pYear">2023-24</span>
                    </div>
                    <div class="print-meta-row">
                        <span class="print-label">Div</span>
                        <span class="print-value" id="pDiv">Div-1</span>
                    </div>
                    <div class="print-meta-row">
                        <span class="print-label">Subject</span>
                        <span class="print-value" id="pSub">Maths</span>
                    </div>
                    <div class="print-meta-row">
                        <span class="print-label">Month</span>
                        <span class="print-value" id="pMonth">January</span>
                    </div>
                    <div class="print-meta-row">
                        <span class="print-label">Faculty</span>
                        <span class="print-value" id="pFac">Prof. User</span>
                    </div>
                    <div class="print-meta-row">
                        <span class="print-label">Date</span>
                        <span class="print-value" id="pDate"></span>
                    </div>
                </div>
                <div class="print-table-wrapper">
                    <table id="ledgerTable" class="print-table"></table>
                </div>
            </div>
        </div>
    </div>

    <div id="marksModal" class="modal">
        <div class="modal-content">
            <span class="close-modal no-print" 
            onclick="closeModal('marksModal')">&times;</span>
            <h2 class="no-print" 
            style="margin-top:0;">Marks Entry</h2>
            <div class="grid-forms no-print" 
            style="margin-bottom: 20px;">
                <input type="text" 
                id="newExamCol" 
                placeholder="Exam Name (e.g., UT-2)">
                <button class="btn btn-p" 
                onclick="addExamColumn()">Add Column</button>
                <button class="btn btn-s" 
                onclick="commitMarks()">Save All</button>
                <button class="btn btn-e" 
                onclick="exportToExcel('marksDataTable','Marks')">Excel</button>
                <button class="btn btn-dark" 
                onclick="printMarks()">
                    <i class="fa fa-print"></i> Print
                </button>
            </div>
            <div class="table-container no-print">
                <table id="marksDataTable">
                    <thead></thead>
                    <tbody></tbody>
                </table>
            </div>

            <div id="printableAreaMarks" class="printable-content" style="display:none;">
                <div class="print-header">
                    <img src="https://raw.githubusercontent.com/shubhamsanap1092-dot/SHUBHAM-/main/sinhgad%20logo.jpg" class="print-logo">
                    <div class="print-text">
                        <h1>Sinhgad Institute of Technology and Science</h1>
                        <p>Narhe, Pune - 411041 | Academic Marks Record</p>
                    </div>
                </div>
                <div class="print-meta-list">
                    <div class="print-meta-row">
                        <span class="print-label">Department</span>
                        <span class="print-value" id="mBranch">IT</span>
                    </div>
                    <div class="print-meta-row">
                        <span class="print-label">Year</span>
                        <span class="print-value" id="mYear">2023-24</span>
                    </div>
                    <div class="print-meta-row">
                        <span class="print-label">Div</span>
                        <span class="print-value" id="mDiv">Div-1</span>
                    </div>
                    <div class="print-meta-row"><span class="print-label">Subject</span>
                        <span class="print-value" id="mSub">Maths</span>
                    </div>
                    <div class="print-meta-row"><span class="print-label">Faculty</span>
                        <span class="print-value" id="mFac">Prof. User</span>
                    </div>
                    <div class="print-meta-row"><span class="print-label">Date</span>
                        <span class="print-value" id="mDate"></span>
                    </div>
                </div>
                <div class="print-table-wrapper">
                    <table id="printMarksTable" class="print-table"></table>
                </div>
            </div>
        </div>
    </div>

    <div id="timetableModal" 
    class="modal">
        <div class="modal-content">
            <span class="close-modal" 
            onclick="closeModal('timetableModal')">&times;</span>
            <div style="display:flex; justify-content:space-between; align-items: center; margin-bottom: 20px;">
                <h2 style="margin:0;">Weekly Timetable</h2>
                <div id="ttAdminControls" 
                style="display:none; gap:10px;">
                    <button class="btn btn-dark" 
                    onclick="addTtRow()">+ Row</button>
                    <button class="btn btn-dark" 
                    onclick="addTtCol()">+ Col</button>
                    <button class="btn btn-s" 
                    onclick="saveTimetable()">Save Changes</button>
                </div>
            </div>
            <div class="tt-wrapper" 
            style="overflow-x:auto;">
                <table class="tt-table" 
                id="ttTable" border="1" 
                style="width:100%; text-align:center;"></table>
            </div>
        </div>
    </div>

    <div id="applyLeaveModal" 
    class="modal">
        <div class="modal-content" 
        style="max-width:500px;">
            <span class="close-modal"
             onclick="closeModal('applyLeaveModal')">&times;</span>
            <h2 style="margin-top:0;">Request Leave</h2>
            <div class="grid-forms"
            style="display: flex; flex-direction: column;">
                <input type="text" 
                id="leaveReason" 
                placeholder="Reason for leave">
                <input type="date" 
                id="leaveDate">
                <button class="btn btn-p" 
                onclick="submitLeave()">Submit Request</button>
            </div>
        </div>
    </div>

    <div id="noticeModal" class="modal">
        <div class="modal-content" 
        style="max-width:500px;">
            <span class="close-modal" 
            onclick="closeModal('noticeModal')">&times;</span>
            <h2 style="margin-top:0;">Post Notice</h2>
            <textarea id="noticeContent" 
            rows="5" 
            placeholder="Enter announcement text here..."></textarea>
            <button class="btn btn-p" 
            style="margin-top:15px; width:100%" 
            onclick="postNotice()">Publish Notice</button>
        </div>
    </div>

    <div id="addStudentModal" class="modal">
        <div class="modal-content" 
        style="max-width:500px;">
            <span class="close-modal" 
            onclick="closeModal('addStudentModal')">&times;</span>
            <h2 style="margin-top:0;">Add Student</h2>
            <div class="grid-forms" 
            style="display: flex; flex-direction: column; gap: 15px;">
                <input type="text" 
                id="newStName" 
                placeholder="Full Name">
                <input type="text" 
                id="newStPhone" 
                placeholder="Phone Number">
                <input type="text" 
                id="newStRoll" 
                placeholder="Roll Number">
                <select id="newStFee">
                    <option value="Pending">Fees Pending</option>
                    <option value="Paid">Fees Paid</option>
                </select>
                <button class="btn btn-p" onclick="saveNewStudent()">Register Student</button>
            </div>
        </div>
    </div>

    <div id="lmsModal" class="modal">
        <div class="modal-content" 
        style="max-width:600px;">
            <span class="close-modal" 
            onclick="closeModal('lmsModal')">&times;</span>
            <h2 style="margin-top:0;">Upload Resource</h2>
            <div class="grid-forms" 
            style="display: flex; flex-direction: column; gap: 15px;">
                <select id="lmsType">
                    <option>Notes</option>
                    <option>Assignment</option>
                    <option>Notice</option>
                </select>
                <input type="text" id="lmsTitle" 
                placeholder="Title/Description">
                <input type="text" id="lmsLink" 
                placeholder="Paste File Link (e.g. Drive URL)">
                <div style="text-align: center; color: var(--text-muted); font-size: 13px; font-weight: 500;">- OR -</div>
                <div class="file-upload-box">
                    <i class="fa fa-cloud-upload-alt" 
                    style="font-size: 32px; color: var(--accent); margin-bottom: 10px;"></i>
                    <br>
                    <input type="file" id="lmsFileLocal" 
                    style="width: 100%; margin-top: 10px;">
                    <br>
                    <small style="color: var(--text-muted);">Choose a file from your PC</small>
                </div>
                <button class="btn btn-p" onclick="uploadLms()">Upload Resource</button>
            </div>
        </div>
    </div>

    <div id="postJobModal" class="modal">
    <div class="modal-content" 
    style="max-width:600px;">
        <span class="close-modal" 
        onclick="closeModal('postJobModal')">&times;</span>
        <h2 style="margin-top:0; color:var(--text-main);"><i class="fa fa-bullhorn"></i> Post New Opportunity</h2>
        
        <div class="grid-forms" style="display:flex; flex-direction:column; gap:15px;">
            <input type="text" id="jobRole" 
            placeholder="Profile (e.g. Full Stack Intern)">
            <input type="text" id="jobCompany" 
            placeholder="Company Name (e.g. Google)">
            
            <div style="display:grid; grid-template-columns: 1fr 1fr; gap:15px;">
                <input 
                type="text" 
                id="jobStipend" 
                placeholder="Stipend (e.g. 15,000 /Month)">
                <input 
                type="text" 
                id="jobDuration" 
                placeholder="Duration (e.g. 3 Months)">
            </div>

            <div style="display:grid; grid-template-columns: 1fr 1fr; gap:15px;">
                <input 
                type="text" 
                id="jobLocation" 
                placeholder="Location (e.g. Work From Home)">
                <input 
                type="date" 
                id="jobDeadline">
            </div>

            <select id="jobType">
                <option 
                value="Internship">Internship</option>
                <option 
                value="Full Time">Full Time Job</option>
            </select>

            <div 
            style="background:rgba(0,0,0,0.03); padding:10px; border-radius:8px;">
                <label 
                style="font-size:12px; font-weight:bold;">Application Mode:</label>
                <select 
                id="jobApplyMode" 
                onchange="toggleLinkInput()">
                    <option value="INTERNAL">Apply on SITS Portal</option>
                    <option value="EXTERNAL">External Link (Internshala/LinkedIn)</option>
                </select>
                <input type="text" id="jobExternalLink" placeholder="Paste External Application Link here..." 
                       style="margin-top:10px; display:none;">
            </div>

            <button class="btn btn-p" onclick="postNewJob()">
                <i class="fa fa-paper-plane"></i> Post Opportunity
            </button>
        </div>
    </div>
</div>
    <div id="guideModal" class="modal">
    <div class="modal-content" style="max-width: 900px; height: 85vh; display: flex; flex-direction: column;">
        <span class="close-modal" onclick="closeModal('guideModal')">&times;</span>
        
        <div style="border-bottom: 1px solid var(--glass-border); margin-bottom: 15px; padding-bottom: 15px;">
            <h2 style="margin:0; display: flex; align-items: center; gap: 10px;">
                <i class="fa fa-book-reader" style="color:var(--accent)"></i> Portal Master Guide
            </h2>
            <p style="margin:5px 0 0; color:var(--text-muted); font-size:14px;">
                Complete documentation for Students, Faculty, and Administrators.
            </p>
        </div>

        <div style="display:flex; gap:10px; margin-bottom:20px; overflow-x:auto; padding-bottom:5px; 
        flex-shrink: 0; border-bottom: 1px solid rgba(0,0,0,0.05);">
            <button class="btn btn-dark" 
            style="padding: 8px 16px; font-size: 13px; white-space: nowrap;" 
            onclick="switchGuide('g-intro')">
                <i class="fa fa-key"></i> Login & Basics
            </button>
            <button class="btn btn-p" 
            style="padding: 8px 16px; font-size: 13px; white-space: nowrap;"
             onclick="switchGuide('g-admin')">
                <i class="fa fa-user-shield"></i> Admin Ops
            </button>
            <button class="btn btn-s" 
            style="padding: 8px 16px; font-size: 13px; white-space: nowrap;" 
            onclick="switchGuide('g-fac')">
                <i class="fa fa-chalkboard-teacher"></i> Faculty Tools
            </button>
            <button class="btn btn-w" 
            style="padding: 8px 16px; font-size: 13px; white-space: nowrap;" 
            onclick="switchGuide('g-stud')">
                <i class="fa fa-user-graduate"></i> Student Zone
            </button>
            <button class="btn btn-e" 
            style="padding: 8px 16px; font-size: 13px; white-space: nowrap;" 
            onclick="switchGuide('g-place')">
                <i class="fa fa-briefcase"></i> Placements
            </button>
            <button class="btn btn-d" 
            style="padding: 8px 16px; font-size: 13px; white-space: nowrap;" 
            onclick="switchGuide('g-util')">
                <i class="fa fa-tools"></i> Utils & Print
            </button>
        </div>

        <div style="overflow-y: auto; padding-right: 15px; flex: 1;">
            
            <div id="g-intro" class="guide-tab" style="animation: fadeInScale 0.3s;">
                <h3 style="color:var(--accent); margin-top:0;">Getting Started</h3>
                
                <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap:20px;">
                    <div style="background: rgba(59, 130, 246, 0.05); padding: 15px; border-radius: 12px; border: 1px solid rgba(59, 130, 246, 0.1);">
                        <strong style="color:var(--accent);">
                            <i class="fa fa-lock">
                            </i> Default Credentials</strong>
                        <ul style="margin: 10px 0; padding-left: 20px; font-size:13px; font-family: monospace; color:var(--text-main);">
                            <li><strong>Admin:</strong> admin@sits.com (Pass: admin)</li>
                            <li><strong>Faculty:</strong> teacher@sits.com (Pass: 1234)</li>
                            <li><strong>Student:</strong> [Phone Number] (Pass: 1234)</li>
                            <li><strong>Parent:</strong> [Phone Number] (Pass: parent)</li>
                        </ul>
                    </div>
                    <div>
                        <strong style="color:var(--text-main);"><i class="fa fa-desktop"></i> Interface Features</strong>
                        <ul style="font-size:13px; line-height:1.8; color:var(--text-muted);">
                            <li><i class="fa fa-moon"></i> 
                                <strong>Dark Mode:</strong> Toggle at the bottom of the sidebar.</li>
                            <li><i class="fa fa-bars"></i> 
                                <strong>Sidebar:</strong> Collapsible menu (top-left on mobile).</li>
                            <li><i class="fa fa-bullhorn"></i> 
                                <strong>Notices:</strong> Orange widget on dashboard shows latest alerts.</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div id="g-admin" class="guide-tab" style="display:none; animation: fadeInScale 0.3s;">
                <h3 style="color:#6366f1; margin-top:0;">Administrator Controls</h3>
                
                <div style="margin-bottom:20px;">
                    <h4 style="margin:0 0 10px 0; color:var(--text-main);">1. Student Management</h4>
                    <ul style="font-size:13px; line-height:1.6;">
                        <li><strong>New Admission:</strong> C
                            ick "New Admission". Fill in Academic, Personal, and Contact details. 
                            Upload required documents (Aadhar, Marksheets).</li>
                        <li><strong>Registry:</strong> 
                            Filter students by Year/Branch/Div. Click 
                            <i class="fa fa-eye">
                            </i> to view full profile or <i class="fa fa-trash"></i> to remove.</li>
                    </ul>
                </div>

                <div style="margin-bottom:20px;">
                    <h4 style="margin:0 0 10px 0; color:var(--text-main);">2. System Maintenance</h4>
                    <ul style="font-size:13px; line-height:1.6;">
                        <li><strong>Issue Resolution:</strong> 
                            Check the "Reported Issues" table. Review complaints (WiFi, Academic, etc.) and click "Resolve" to close them.</li>
                        <li><strong>Post Notice:</strong> 
                            Click "Post Notice" to broadcast messages to all users' dashboards.</li>
                    </ul>
                </div>
            </div>

            <div id="g-fac" class="guide-tab" style="display:none; animation: fadeInScale 0.3s;">
                <h3 style="color:#10b981; margin-top:0;">Faculty Suite</h3>
                
                <div style="display:grid; grid-template-columns: 1fr 1fr; gap:20px;">
                    <div style="background:rgba(16, 185, 129, 0.05); padding:15px; border-radius:12px;">
                        <h4 style="color:#059669; margin-top:0;"><i class="fa fa-user-check"></i> Marking Attendance</h4>
                        <ol style="font-size:13px; padding-left:20px;">
                            <li>Select <strong>Class, Div, & Subject</strong> from dropdowns.</li>
                            <li>Click the <strong>Attendance</strong> card.</li>
                            <li>Select Date.</li>
                            <li><strong>Important:</strong> Enter only <em>ABSENT</em> 
                                roll numbers separated by commas (e.g., <code>1, 12, 45</code>).</li>
                            <li>Click Save. All others are marked Present.</li>
                        </ol>
                    </div>

                    <div style="background:rgba(59, 130, 246, 0.05); padding:15px; border-radius:12px;">
                        <h4 style="color:#2563eb; margin-top:0;"><i class="fa fa-edit"></i> Entering Marks</h4>
                        <ol style="font-size:13px; padding-left:20px;">
                            <li>Click <strong>Marks Entry</strong>.</li>
                            <li>Create a new column (e.g., "Unit Test 1").</li>
                            <li>Enter marks directly in the table grid.</li>
                            <li>Click <strong>Save All</strong> to commit to database.</li>
                        </ol>
                    </div>
                </div>

                <div style="margin-top:20px;">
                    <h4 style="margin-bottom:5px;">Other Faculty Tasks:</h4>
                    <ul style="font-size:13px; line-height:1.6;">
                        <li><strong>Leave Requests:</strong> 
                            Approve or Reject student leave applications directly from the dashboard.</li>
                        <li><strong>Profile Access:</strong> 
                            View uploaded student documents (Aadhar/Cast Cert) via the "Student List" table.</li>
                    </ul>
                </div>
            </div>

            <div id="g-stud" class="guide-tab" style="display:none; animation: fadeInScale 0.3s;">
                <h3 style="color:#db2777; margin-top:0;">Student Features</h3>
                
                <div style="margin-bottom:15px; border-left:3px solid #db2777; padding-left:15px;">
                    <strong style="display:block; margin-bottom:5px;"
                    >Dashboard Overview</strong>
                    <span style="font-size:13px; color:var(--text-muted);"
                    >View your real-time Attendance Pie Chart, Fee Status (Paid/Pending), and recent Notices immediately upon login.</span>
                </div>

                <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap:15px;">
                    <div>
                        <h4 style="font-size:14px;"><i class="fa fa-cloud-upload-alt"></i> LMS & Assignments</h4>
                        <p style="font-size:12px; color:var(--text-muted);">
                            - <strong>Notes:</strong> Click 'Download' or 'View'.<br>
                            - <strong>Assignments:</strong> Click 'Submit'. You can upload a PDF or paste a Drive link. Status changes to "Turned In".
                        </p>
                    </div>
                    <div>
                        <h4 style="font-size:14px;"><i class="fa fa-file-alt"></i> My Documents</h4>
                        <p style="font-size:12px; color:var(--text-muted);">
                            Go to "My Documents" > "Upload" to safe-keep your digital records (Aadhar, 10th/12th Marksheets) on the portal.
                        </p>
                    </div>
                    <div>
                        <h4 style="font-size:14px;"><i class="fa fa-exclamation-triangle"></i> Support</h4>
                        <p style="font-size:12px; color:var(--text-muted);">
                            Use "Report Issue" for infrastructure or academic complaints. Use "Apply Leave" to notify teachers of absence.
                        </p>
                    </div>
                </div>
            </div>

            <div id="g-place" class="guide-tab" style="display:none; animation: fadeInScale 0.3s;">
                <h3 style="color:#f59e0b; margin-top:0;">Training & Placement</h3>
                
                <table style="width:100%; border-collapse:collapse; font-size:13px; margin-top:10px;">
                    <tr style="background:rgba(0,0,0,0.03); text-align:left;">
                        <th style="padding:10px;">Feature</th>
                        <th style="padding:10px;">Admin Action</th>
                        <th style="padding:10px;">Student Action</th>
                    </tr>
                    <tr>
                        <td style="padding:10px; border-bottom:1px solid #eee;">
                            <strong>Posting</strong></td>
                        <td style="padding:10px; border-bottom:1px solid #eee;">
                            Post Jobs/Internships. Set mode to "Internal" (portal) or "External" (Link).</td>
                        <td style="padding:10px; border-bottom:1px solid #eee;">
                            View listings with tags (Internship/Full Time). Search by company.</td>
                    </tr>
                    <tr>
                        <td style="padding:10px;"><strong>Applying</strong></td>
                        <td style="padding:10px;">-</td>
                        <td style="padding:10px;">Click <strong>Apply Now</strong> 
                            for internal tracking, or visit external links for other platforms.</td>
                    </tr>
                </table>
            </div>

            <div id="g-util" class="guide-tab" style="display:none; animation: fadeInScale 0.3s;">
                <h3 style="color:#475569; margin-top:0;">Advanced Utilities</h3>
                
                <ul style="font-size:13px; line-height:1.8;">
                    <li>
                        <strong><i class="fa fa-print"></i> Printing & Exporting:</strong>
                        <br>Available in Attendance and Marks modals.
                        <br>- <em>Excel:</em> Downloads an .xlsx file.
                        <br>- <em>Print:</em> Generates a clean, black-and-white official format (hiding buttons/menus) for physical records.
                    </li>
                    <li>
                        <strong><i class="fa fa-calendar-alt"></i> Timetable Editor:</strong>
                        <br>Admin/Faculty can click "Timetable". Use <strong>+ Row</strong> / 
                        <strong>+ Col</strong> to expand. Click ANY cell to type subjects. Click "Save Changes" to publish.
                    </li>
                    <li>
                        <strong><i class="fa fa-external-link-alt"></i> External Resources:</strong>
                        <br>Access the official college website or online study materials (Brainkart) directly within the portal modal without leaving the app.
                    </li>
                </ul>
            </div>

        </div>

        <div style="margin-top:15px; text-align:right; border-top:1px solid var(--glass-border); padding-top:15px;">
            <button class="btn btn-d" onclick="closeModal('guideModal')">Close Guide</button>
        </div>
    </div>
</div>
<div id="stDocModal" class="modal">
    <div class="modal-content" style="max-width:500px;">
        <span class="close-modal" onclick="closeModal('stDocModal')">&times;</span>
        <h2 style="margin-top:0;"><i class="fa fa-file-upload"></i> Upload Document</h2>
        <p style="color:var(--text-muted); font-size:14px; margin-bottom:20px;">
            Upload official documents for verification.
        </p>

        <div class="grid-forms" style="display: flex; flex-direction: column; gap: 15px;">
            <label style="font-size:12px; font-weight:bold;">Select Document Type</label>
            <select id="stDocType">
                <option value="Aadhar Card">Aadhar Card</option>
                <option value="10th Marksheet">10th Marksheet</option>
                <option value="12th Marksheet">12th Marksheet</option>
                <option value="Domicile Cert">Domicile Certificate</option>
                <option value="Income Cert">Income Certificate</option>
                <option value="Caste Certificate">Caste Certificate</option>
                <option value="Gap Certificate">Gap Certificate</option>
                <option value="Other">Other</option>
            </select>

            <div class="file-upload-box">
                <i class="fa fa-file-image" style="font-size: 32px; color: var(--accent); margin-bottom: 10px;"></i>
                <br>
                <input type="file" id="stDocFile" style="width: 100%; margin-top: 10px;">
                <small style="color: var(--text-muted);">JPG/PDF/PNG only</small>
            </div>
            
            <button class="btn btn-p" onclick="saveStudentUpload()">
                <i class="fa fa-check-circle"></i> Upload Now
            </button>
        </div>
    </div>
</div>
<div id="reportIssueModal" class="modal">
    <div class="modal-content" style="max-width:500px;">
        <span class="close-modal" onclick="closeModal('reportIssueModal')">&times;</span>
        <h2 style="margin-top:0; color:var(--danger);"><i class="fa fa-exclamation-circle"></i> Report an Issue</h2>
        <p style="color:var(--text-muted); font-size:14px; margin-bottom:20px;">
            Describe your issue clearly. This will be sent directly to the Admin.
        </p>

        <div class="grid-forms" style="display: flex; flex-direction: column; gap: 15px;">
            <label style="font-size:12px; font-weight:bold;">Issue Category</label>
            <select id="issueCategory">
                <option value="Academic">Academic (Marks/Attendance)</option>
                <option value="Infrastructure">Infrastructure (WiFi/Classroom)</option>
                <option value="Administrative">Administrative (Fees/Documents)</option>
                <option value="Other">Other</option>
            </select>

            <label style="font-size:12px; font-weight:bold;">Description</label>
            <textarea id="issueDesc" rows="4" placeholder="Please describe the problem in detail..."></textarea>

            <button class="btn btn-d" onclick="submitIssueReport()">
                <i class="fa fa-paper-plane"></i> Submit Report
            </button>
        </div>
    </div>
</div>
<div id="aboutCollegeModal" class="modal">
    <div class="modal-content" 
    style="width: 95%; max-width: 1200px; height: 90vh;">
        <div style="padding: 15px 25px; display: flex; justify-content: space-between; align-items: center; 
        border-bottom: 1px solid #e2e8f0; background: #f8fafc;">
            <div style="display: flex; align-items: center; gap: 10px;">
                <img src="https://raw.githubusercontent.com/shubhamsanap1092-dot/SHUBHAM-/main/sinhgad%20logo.jpg" 
                style="width: 30px; border-radius: 5px;">
                <h3 style="margin:0; font-size: 16px; color: #0f172a;">Sinhgad Institute Website</h3>
            </div>
            <div style="display: flex; align-items: center; gap: 15px;">
                <a href="https://sinhgad.edu/" target="_blank" class="btn btn-s" 
                style="padding: 6px 12px; font-size: 12px; text-decoration: none;">
                    <i class="fa fa-external-link-alt"></i> Open in Browser
                </a>
                <span class="close-modal" 
                style="position: static; color: #64748b; font-size: 24px;" 
                onclick="closeModal('aboutCollegeModal')">&times;</span>
            </div>
        </div>
        
        <iframe src="https://sinhgad.edu/" 
        class="iframe-full-height" 
        title="Sinhgad Website" 
        sandbox="allow-same-origin allow-scripts allow-popups allow-forms">
            <p style="padding: 20px; text-align: center;">Your browser does not support iframes.</p>
        </iframe>
    </div>
</div>
<div id="studyMaterialModal" class="modal">
    <div class="modal-content" 
    style="width: 95%; max-width: 1200px; height: 90vh;">
        <div style="padding: 15px 25px; display: flex; justify-content: space-between; 
        align-items: center; border-bottom: 1px solid #e2e8f0; background: #f8fafc;">
            <div style="display: flex; align-items: center; gap: 10px;">
                <i class="fa fa-book-reader" 
                style="font-size: 20px; color: #3b82f6;"></i>
                <h3 style="margin:0; font-size: 16px; color: #0f172a;">Engineering Study Material (BrainKart)</h3>
            </div>
            <div style="display: flex; align-items: center; gap: 15px;">
                <a href="https://www.brainkart.com/menu/engineering/" target="_blank" class="btn btn-s" 
                style="padding: 6px 12px; font-size: 12px; text-decoration: none;">
                    <i class="fa fa-external-link-alt"></i> Open in Browser
                </a>
                <span class="close-modal" 
                style="position: static; color: #64748b; font-size: 24px;" 
                onclick="closeModal('studyMaterialModal')">&times;</span>
            </div>
        </div>
        
        <iframe src="https://www.brainkart.com/menu/engineering/" 
        class="iframe-full-height" 
        title="Study Material" 
        sandbox="allow-same-origin allow-scripts allow-popups allow-forms">
            <p style="padding: 20px; text-align: center;">Your browser does not support iframes.</p>
        </iframe>
    </div>
</div>
<div id="universityLoginModal" class="modal">
    <div class="modal-content" style="width: 95%; max-width: 1200px; height: 90vh;">
        <div style="padding: 15px 25px; display: flex; justify-content: space-between; align-items: 
        center; border-bottom: 1px solid #e2e8f0; background: #f8fafc;">
            <div style="display: flex; align-items: center; gap: 10px;">
                <i class="fa fa-graduation-cap" style="font-size: 20px; color: #b45309;"></i>
                <h3 style="margin:0; font-size: 16px; color: #0f172a;">SPPU University Student Login</h3>
            </div>
            <div style="display: flex; align-items: center; gap: 15px;">
                <a href="https://www.unipune.ac.in/" 
                target="_blank" 
                class="btn btn-s" 
                style="padding: 6px 12px; font-size: 12px; text-decoration: none;">
                    <i class="fa fa-external-link-alt"></i> Open in Browser
                </a>
                <span class="close-modal" 
                style="position: static; color: #64748b; font-size: 24px;" 
                onclick="closeModal('universityLoginModal')">&times;</span>
            </div>
        </div>
        
        <iframe src="https://www.unipune.ac.in/" 
        class="iframe-full-height" 
        title="University Login" 
        sandbox="allow-same-origin allow-scripts allow-popups allow-forms">
            <p style="padding: 20px; text-align: center;">Your browser does not support iframes.</p>
        </iframe>
    </div>
</div>
<div id="universalBrowserModal" class="modal" style="z-index: 3000;">
    <div class="modal-content browser-modal-content">
        <div class="browser-header">
            <div class="browser-title">
                <i class="fa fa-globe" style="color:var(--accent)"></i>
                <span id="browserTitleText">Web Portal</span>
            </div>
            <div class="browser-controls">
                <button class="btn btn-s" style="padding: 5px 10px; font-size: 12px;" onclick="refreshBrowserFrame()">
                    <i class="fa fa-sync"></i> Refresh
                </button>
                <button class="btn btn-d" style="padding: 5px 10px; font-size: 12px;" onclick="closeModal('universalBrowserModal')">
                    <i class="fa fa-times"></i> Close
                </button>
            </div>
        </div>
        <iframe id="universalFrame" class="browser-frame" src="" sandbox="allow-same-origin allow-scripts allow-popups allow-forms">
            <p style="padding: 20px; text-align: center;">Your browser does not support iframes.</p>
        </iframe>
    </div>
</div>

<div id="messageModal" class="modal">
    <div class="modal-content" style="max-width:400px;">
        <span class="close-modal" onclick="closeModal('messageModal')">&times;</span>
        <h2 style="margin-top:0;"><i class="fa fa-comment-alt"></i> Send Message</h2>
        <p style="color:var(--text-muted); margin-bottom:15px; font-size:14px;">
            To: <strong id="msgTargetName" style="color:var(--text-main)">Student Name</strong>
        </p>
        <input type="hidden" id="msgTargetPhone">
        
        <label style="font-size:12px; font-weight:bold; color:var(--text-muted);">MESSAGE CONTENT</label>
        <textarea id="msgContent" rows="5" placeholder="Type your instruction or message here..." 
            style="width:100%; margin-top:5px; margin-bottom:15px; border:1px solid var(--glass-border); padding:10px; border-radius:10px;"></textarea>
        
        <button class="btn btn-p" style="width:100%" onclick="sendStudentMessage()">
            <i class="fa fa-paper-plane"></i> Send Now
        </button>
    </div>
</div>

<div id="viewMessagesModal" class="modal">
    <div class="modal-content" style="max-width:500px;">
        <span class="close-modal" onclick="closeModal('viewMessagesModal')">&times;</span>
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; border-bottom:1px solid #eee; padding-bottom:15px;">
            <h2 style="margin:0;"><i class="fa fa-envelope-open-text" style="color:var(--accent)"></i> Inbox</h2>
            <button class="btn btn-s" style="padding:6px 12px; font-size:12px;" onclick="renderStudentMessages()">
                <i class="fa fa-sync"></i> Refresh
            </button>
        </div>
        <div id="studentMsgList" style="display:flex; flex-direction:column; gap:15px; max-height:400px; overflow-y:auto; padding:5px;">
            </div>
    </div>
</div>
</body>
<script>
    const INITIAL_STUDENTS = 
                            [
        { n: "BHALERAO PAVAN DINKARAPPA",   p: "9325530650", y: "1ST YEAR", b: "COMBINE", d: "Div-1", r: "1" },
        { n: "BORKAR DNYANESHWARI TANHAJI", p: "7666103944", y: "1ST YEAR", b: "COMBINE", d: "Div-1", r: "2" },
        { n: "SHETKAR DNYANESH RAMCHANDRA", p: "8888216966", y: "1ST YEAR", b: "COMBINE", d: "Div-1", r: "3" },
        { n: "NARWADE SHRADDHA VILAS",      p: "9423756624", y: "1ST YEAR", b: "COMBINE", d: "Div-1", r: "4" },
        { n: "KADAM YASH RAJENDRA", p: "7387932865", y: "1ST YEAR", b: "COMBINE", d: "Div-1", r: "5" },
        { n: "KADAM SHRADDHA SADANAND", p: "8459430473", y: "1ST YEAR", b: "COMBINE", d: "Div-1", r: "6" },
        { n: "TILVE VEDANT MAHESH", p: "7038580411", y: "1ST YEAR", b: "COMBINE", d: "Div-1", r: "7" },
        { n: "BHAGAT RUTUJA PRAVIN", p: "9552737716", y: "1ST YEAR", b: "COMBINE", d: "Div-1", r: "8" },
        { n: "HIRE PRIYANKA RUSHINDAR", p: "9527592219", y: "1ST YEAR", b: "COMBINE", d: "Div-2", r: "1" },
        { n: "RATHOD VIKAS RAJARAM", p: "8767459645", y: "1ST YEAR", b: "COMBINE", d: "Div-2", r: "2" },
        { n: "JADHAV DHANANJAY NAVNATH", p: "8669054022", y: "1ST YEAR", b: "COMBINE", d: "Div-2", r: "3" },
        { n: "WALUNJ ASHISH YASHWANT", p: "9850116884", y: "1ST YEAR", b: "COMBINE", d: "Div-2", r: "4" },
        { n: "KSHIRSAGAR VEDIKA BAJRANG", p: "9226395502", y: "1ST YEAR", b: "COMBINE", d: "Div-2", r: "5" },
        { n: "KOTHIMBIRE GIRISH CHANDRASHEKHAR", p: "9322002382", y: "1ST YEAR", b: "COMBINE", d: "Div-2", r: "6" },
        { n: "DESAI VIRAJ BAJIRAO", p: "8983687233", y: "1ST YEAR", b: "COMBINE", d: "Div-2", r: "7" },
        { n: "GODASE ARYAN RAJENDRA", p: "9359384639", y: "1ST YEAR", b: "COMBINE", d: "Div-2", r: "8" },
        { n: "JAGADALE SNEHAL BHAURAO", p: "7757062613", y: "1ST YEAR", b: "COMBINE", d: "Div-2", r: "9" },
        { n: "SHIRSAT RITESH RAJKUMAR", p: "8459952126", y: "1ST YEAR", b: "COMBINE", d: "Div-2", r: "10" },
        { n: "MAGDUM ANUSHKA SHARAD", p: "7385991130", y: "1ST YEAR", b: "COMBINE", d: "Div-2", r: "11" },
        { n: "SIDDHI SANTOSH RALE", p: "8080763639", y: "1ST YEAR", b: "COMBINE", d: "Div-2", r: "12" },
        { n: "GAIKWAD PRIYANKA PRAMOD", p: "8624095285", y: "1ST YEAR", b: "COMBINE", d: "Div-2", r: "13" },
        { n: "WAGHMARE SANIKA BHAUSAHEB", p: "9021988498", y: "1ST YEAR", b: "COMBINE", d: "Div-2", r: "14" },
        { n: "JAGTAP SAMIKSHA ASHOK", p: "9850035016", y: "1ST YEAR", b: "COMBINE", d: "Div-2", r: "15" },
        { n: "SAVKARE RESHMA DILIP", p: "9322083371", y: "1ST YEAR", b: "COMBINE", d: "Div-2", r: "16" },
        { n: "ASOLE AMIT RAJESH", p: "8855862396", y: "1ST YEAR", b: "COMBINE", d: "Div-2", r: "17" },
        { n: "CHONDHIKAR CHINMAY SHAMSUNDER", p: "7385378585", y: "1ST YEAR", b: "COMBINE", d: "Div-2", r: "18" },
        { n: "PATTEWAR VARAD VINOD", p: "7058068161", y: "1ST YEAR", b: "COMBINE", d: "Div-2", r: "19" },
        { n: "PANDIT NEEL PARAG", p: "7028567607", y: "1ST YEAR", b: "COMBINE", d: "Div-2", r: "20" },
        { n: "APURVA BALAJI INGOLE", p: "9307540076", y: "1ST YEAR", b: "COMBINE", d: "Div-2", r: "21" },
        { n: "MOHITE HARSHVARDHAN RUPESH", p: "9356975916", y: "1ST YEAR", b: "COMBINE", d: "Div-2", r: "22" },
        { n: "GARJE SHREYASH GANESH", p: "9284638745", y: "1ST YEAR", b: "COMBINE", d: "Div-2", r: "23" },
        { n: "DISHA GOPALSINGH BISEN", p: "7559442449", y: "1ST YEAR", b: "COMBINE", d: "Div-2", r: "24" },
        { n: "KULKARNI SAI YOGESH", p: "9371052722", y: "1ST YEAR", b: "COMBINE", d: "Div-2", r: "25" },
        { n: "SHINDE MOHINI SHIVRAJ", p: "8999195748", y: "1ST YEAR", b: "COMBINE", d: "Div-2", r: "26" },
        { n: "KHUSHI KISHOR JADHAV", p: "9529135018", y: "1ST YEAR", b: "COMBINE", d: "Div-2", r: "27" },
        { n: "ANDHALE VEDANT AJINATH", p: "8999989455", y: "1ST YEAR", b: "COMBINE", d: "Div-2", r: "28" },
        { n: "KAWALE ANKIT VINOD", p: "7517086168", y: "1ST YEAR", b: "COMBINE", d: "Div-2", r: "29" },
        { n: "KERE PRAGATI RSH", p: "9322346905", y: "1ST YEAR", b: "COMBINE", d: "Div-2", r: "30" },
        { n: "NAGARGOJE JAYWANT RAVINDRA", p: "7249604536", y: "1ST YEAR", b: "COMBINE", d: "Div-2", r: "31" },
        { n: "DURGE MRUNALI VIKRAM", p: "9422631120", y: "1ST YEAR", b: "COMBINE", d: "Div-2", r: "32" },
        { n: "KAMBLE PIYUSH SAUDAGAR", p: "9423360436", y: "1ST YEAR", b: "COMBINE", d: "Div-2", r: "33" },
        { n: "WALUNJ DNYANESHWARI DIPAK", p: "7387932865", y: "1ST YEAR", b: "COMBINE", d: "Div-2", r: "34" },
        { n: "SHIVTARE ABHAY SOMNATH", p: "9209383809", y: "1ST YEAR", b: "COMBINE", d: "Div-2", r: "35" },
        { n: "DANGE PIYUSH TANSEN", p: "9158095213", y: "1ST YEAR", b: "COMBINE", d: "Div-2", r: "36" },
        { n: "SURAJ NANASAHEB LEKURWALE", p: "9175316526", y: "1ST YEAR", b: "COMBINE", d: "Div-2", r: "37" },
        { n: "ANKUSH KALIDAS CHAUDHAR", p: "9209428980", y: "1ST YEAR", b: "COMBINE", d: "Div-2", r: "38" },
        { n: "PAWAR NAYAN SHASHIKANT", p: "9284490848", y: "1ST YEAR", b: "COMBINE", d: "Div-2", r: "39" },
        { n: "JADHAV SAHYOG DNYANESHWAR", p: "9309462326", y: "1ST YEAR", b: "COMBINE", d: "Div-2", r: "40" },
        { n: "ATHAWALE SHRADDHA ASHOKRAO", p: "9322935065", y: "1ST YEAR", b: "COMBINE", d: "Div-2", r: "41" },
        { n: "MADHURI SANTOSH JAGADALE", p: "7498208986", y: "1ST YEAR", b: "COMBINE", d: "Div-2", r: "42" },
        { n: "KALE PRANAV MUKINDA", p: "9552551627", y: "1ST YEAR", b: "COMBINE", d: "Div-2", r: "43" },
        { n: "FAISAL MOHAMMAD SHAIKH", p: "9359532762", y: "1ST YEAR", b: "COMBINE", d: "Div-2", r: "44" },
        { n: "HARSHAL BALAJI ITKAR", p: "7498939884", y: "1ST YEAR", b: "COMBINE", d: "Div-2", r: "45" },
        { n: "NANNAWARE ADITYA VINOD", p: "9309573979", y: "1ST YEAR", b: "COMBINE", d: "Div-2", r: "46" },
        { n: "SUPEKAR PARNAVI RAJENDRA", p: "7720904534", y: "1ST YEAR", b: "COMBINE", d: "Div-2", r: "47" },
        { n: "HARSHDEEP SUDHIR KAMBLE", p: "9322773865", y: "1ST YEAR", b: "COMBINE", d: "Div-2", r: "48" },
        { n: "AKUSKAR VEDANT CHANDRAKANT", p: "9022160313", y: "1ST YEAR", b: "COMBINE", d: "Div-2", r: "49" },
        { n: "OM GAUTAM BHUSARE", p: "7624010227", y: "1ST YEAR", b: "COMBINE", d: "Div-2", r: "50" },
        { n: "NANDINI VINAYAK PATIL", p: "9021298625", y: "1ST YEAR", b: "COMBINE", d: "Div-3", r: "1" },
        { n: "SHUBHAM SHIVAJI THOMBARE", p: "8446182826", y: "1ST YEAR", b: "COMBINE", d: "Div-3", r: "2" },
        { n: "UMBRATKAR MAITHILI SANTOSH", p: "9307652252", y: "1ST YEAR", b: "COMBINE", d: "Div-3", r: "3" },
        { n: "PATIL SUMIT SHIVDAS", p: "9021643536", y: "1ST YEAR", b: "COMBINE", d: "Div-3", r: "4" },
        { n: "ASHITOSH SHARAD SAID", p: "9284148679", y: "1ST YEAR", b: "COMBINE", d: "Div-3", r: "5" },
        { n: "SHRAVANI VINAYAK SHALGAR", p: "9503532509", y: "1ST YEAR", b: "COMBINE", d: "Div-3", r: "6" },
        { n: "GAIKWAD HARISH DIPAK", p: "8799921294", y: "1ST YEAR", b: "COMBINE", d: "Div-3", r: "7" },
        { n: "GADADE TANISHKA MALHARI", p: "9309018103", y: "1ST YEAR", b: "COMBINE", d: "Div-3", r: "8" },
        { n: "PATHAN NOOR AFSHA SER", p: "7350203285", y: "1ST YEAR", b: "COMBINE", d: "Div-3", r: "9" },
        { n: "GANGAWARE PRATHMESH DNYANOBA", p: "9421627071", y: "1ST YEAR", b: "COMBINE", d: "Div-3", r: "10" },
        { n: "KATHAR GAYATRI SURESH", p: "8459858728", y: "1ST YEAR", b: "COMBINE", d: "Div-3", r: "11" },
        { n: "KOLHE ANJALI ARJUN", p: "8483876110", y: "1ST YEAR", b: "COMBINE", d: "Div-3", r: "12" },
        { n: "AVDHUT DATTATRAY SANGALE", p: "9309767193", y: "1ST YEAR", b: "COMBINE", d: "Div-3", r: "13" },
        { n: "GAVADE AMBIKA SANTOSH", p: "9850800545", y: "1ST YEAR", b: "COMBINE", d: "Div-3", r: "14" },
        { n: "SURYAWANSHI ADESH RAJU", p: "9028523238", y: "1ST YEAR", b: "COMBINE", d: "Div-3", r: "15" },
        { n: "VEDANT DEVIDAS RAUT", p: "9607484739", y: "1ST YEAR", b: "COMBINE", d: "Div-3", r: "16" },
        { n: "BHOJANE CHAITALI SANJAY", p: "8087709373", y: "1ST YEAR", b: "COMBINE", d: "Div-3", r: "17" },
        { n: "SHENDE SIDDHI UMESH", p: "8149267009", y: "1ST YEAR", b: "COMBINE", d: "Div-3", r: "18" },
        { n: "PIMPALGAVE BAJRANG SHIVAJI", p: "8459430473", y: "1ST YEAR", b: "COMBINE", d: "Div-3", r: "19" },
        { n: "CHAVAN AJAY RAJARAM", p: "8010757631", y: "1ST YEAR", b: "COMBINE", d: "Div-3", r: "20" },
        { n: "CHADOKAR RISHIKA YOGESH", p: "9699945991", y: "1ST YEAR", b: "COMBINE", d: "Div-3", r: "21" },
        { n: "TEJAS NANDKUMAR RATHOD", p: "9359798864", y: "1ST YEAR", b: "COMBINE", d: "Div-3", r: "22" },
        { n: "PRANAV CHHAGAN GAIKWAD", p: "8197775751", y: "1ST YEAR", b: "COMBINE", d: "Div-3", r: "23" },
        { n: "UTTARWAR KAUSTUBH VIJAY", p: "7972564543", y: "1ST YEAR", b: "COMBINE", d: "Div-3", r: "24" },
        { n: "GHODKE SHIVAM SATISH", p: "7972624725", y: "1ST YEAR", b: "COMBINE", d: "Div-3", r: "25" },
        { n: "AMRUTA DATTATRAY SAPKAL", p: "9579827176", y: "1ST YEAR", b: "COMBINE", d: "Div-3", r: "26" },
        { n: "KHEDKAR ARJUN HARIBHAU", p: "8459613354", y: "1ST YEAR", b: "COMBINE", d: "Div-3", r: "27" },
        { n: "KASHISH KAILASRAO INGOLE", p: "9588687208", y: "1ST YEAR", b: "COMBINE", d: "Div-3", r: "28" },
        { n: "AHIRE SNEHA JIVAN", p: "8261843398", y: "1ST YEAR", b: "COMBINE", d: "Div-3", r: "29" },
        { n: "KALE SHUBHAM SANDIP", p: "9172584416", y: "1ST YEAR", b: "COMBINE", d: "Div-3", r: "30" },
        { n: "DHAWARE ADITYA RAVI", p: "9665486558", y: "1ST YEAR", b: "COMBINE", d: "Div-3", r: "31" },
        { n: "KSHITIJ DIPAK PATIL", p: "9322472321", y: "1ST YEAR", b: "COMBINE", d: "Div-3", r: "32" },
        { n: "THEURKAR ANUSHKA VIJAY", p: "7038682544", y: "1ST YEAR", b: "COMBINE", d: "Div-3", r: "33" },
        { n: "VISHWAJEET CHANDRAKANT YEKAL", p: "9322810381", y: "1ST YEAR", b: "COMBINE", d: "Div-3", r: "34" },
        { n: "HARDE VIKAS KAILAS", p: "9579058226", y: "1ST YEAR", b: "COMBINE", d: "Div-3", r: "35" },
        { n: "MANJARE AJINKYA BHAGWAN", p: "8788321934", y: "1ST YEAR", b: "COMBINE", d: "Div-3", r: "36" },
        { n: "WAVARE SAMIKSHA SUNIL", p: "8999014939", y: "1ST YEAR", b: "COMBINE", d: "Div-3", r: "37" },
        { n: "MULLA JISHAN AMIN", p: "9011546472", y: "1ST YEAR", b: "COMBINE", d: "Div-3", r: "38" },
        { n: "TORANGI SAMARTH NAGANATH", p: "8237846080", y: "1ST YEAR", b: "COMBINE", d: "Div-3", r: "39" },
        { n: "VISHWAJEET VINOD BAN", p: "9404043956", y: "1ST YEAR", b: "COMBINE", d: "Div-3", r: "40" },
        { n: "BAVISKAR GANESH MAHENDRA", p: "7770039708", y: "1ST YEAR", b: "COMBINE", d: "Div-3", r: "41" },
        { n: "GUNJAL AJINKYA ANGAD", p: "9699537376", y: "1ST YEAR", b: "COMBINE", d: "Div-3", r: "42" },
        { n: "KALBANDE SANKET GAJANAN", p: "9325764542", y: "1ST YEAR", b: "COMBINE", d: "Div-3", r: "43" },
        { n: "YANDOLE NAMRATA TULASHIDAS", p: "8208873763", y: "1ST YEAR", b: "COMBINE", d: "Div-3", r: "44" },
        { n: "DAHALE MRUDULA MAHESH", p: "9373480242", y: "1ST YEAR", b: "COMBINE", d: "Div-3", r: "45" },
        { n: "KOTLAPURE SUMIT SHASHIKANT", p: "7219387660", y: "1ST YEAR", b: "COMBINE", d: "Div-3", r: "46" },
        { n: "BHOSALE HARSHADA HARIDAS", p: "7498864781", y: "1ST YEAR", b: "COMBINE", d: "Div-3", r: "47" },
        { n: "SHIVAM BADRINATH PARJANE", p: "8262822371", y: "1ST YEAR", b: "COMBINE", d: "Div-3", r: "48" },
        { n: "PATIL SAKSHI JITENDRA", p: "9370848370", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "1" },
        { n: "JANHAVI BHUSHAN MAZIRE", p: "9834490200", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "2" },
        { n: "MANISHA HIRAND BOGATI", p: "9921349513", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "3" },
        { n: "CHIDE VEDANTI RAJU", p: "8308190976", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "4" },
        { n: "OM BALU GHADAGE", p: "7219876418", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "5" },
        { n: "SATPUTE OMKAR ROHIDAS", p: "9226792005", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "6" },
        { n: "GURAV SNEHA RAJU", p: "8668367630", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "7" },
        { n: "JADHAV PRAGATI PRASHANT", p: "9834089178", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "8" },
        { n: "GANDHI YUG SACHIN", p: "9284064014", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "9" },
        { n: "KADAM SHRUTIKA DIPAK", p: "8788765330", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "10" },
        { n: "JADHAV ADITYA SURESH", p: "7499935954", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "11" },
        { n: "SANSKRUTI BABURAO JIVANE", p: "8669007145", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "12" },
        { n: "PATVEKAR NOMAN MOHMMAD", p: "8459430473", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "13" },
        { n: "MEGHANA MAHENDRA KUDAGI", p: "9673124013", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "14" },
        { n: "PACHPUTE PURVA ANIL", p: "8263042144", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "15" },
        { n: "GHATAGE SAI SHEEV", p: "9175936216", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "16" },
        { n: "GANGAWANE APOORVA SANJAY", p: "9322083400", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "17" },
        { n: "NALAWADE SRUSHTI MANOJKUMAR", p: "8983495178", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "18" },
        { n: "KHATAL SHANTANU PRAVIN", p: "9699150096", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "19" },
        { n: "RATHOD GANESH RAJKUMAR", p: "9370909296", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "20" },
        { n: "SIDDHI BANDU MARNE", p: "7385300981", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "21" },
        { n: "GUJAR VEDANT PRAVIN", p: "9284226737", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "22" },
        { n: "MESHRAM SHRUTI SUNIL", p: "8552891293", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "23" },
        { n: "KADAM PRUTHVIRAJ RAMRATAN", p: "8010521259", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "24" },
        { n: "WAGH BHUMIKA SATISH", p: "9890889702", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "25" },
        { n: "SHREYASH ARJUN WADTILE", p: "9518312889", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "26" },
        { n: "FEDRAM AJIT GANGAPRASAD", p: "8530887984", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "27" },
        { n: "THAKRE ADITYA AJAYKUMAR", p: "7666863588", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "28" },
        { n: "SAMARTH ANAND BADAVE", p: "9561147611", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "29" },
        { n: "LABADE PRANJAL NANDKISHOR", p: "7498281703", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "30" },
        { n: "DAFE YASH DNYANESHWAR", p: "8080530852", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "31" },
        { n: "SURYAVANSHI SUPRIYA SOPANRAO", p: "8010450231", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "32" },
        { n: "DHAMMAPAL SAWATAHARI KAMBLE", p: "7498121934", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "33" },
        { n: "SATVA ROHIDAS SURNAR", p: "8767369456", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "34" },
        { n: "DERE ADITYA SATISH", p: "8149859289", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "35" },
        { n: "SIRSATH ADITYA MOKINDA", p: "8975871413", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "36" },
        { n: "ASHLESHA VITTHAL SHEJWAL", p: "8830160259", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "37" },
        { n: "NAJAN DINESH ASHOK", p: "7757014615", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "38" },
        { n: "ABHANG YASH VAIBHAV", p: "8517810770", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "39" },
        { n: "ATHARV PRAKASH GOTE", p: "8055977385", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "40" },
        { n: "VIVEK VIJAY GUPTA", p: "8830896331", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "41" },
        { n: "SHINDE PRANAV BHAULAL", p: "9529509580", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "42" },
        { n: "TARANGE ROHAN SATISH", p: "8767945330", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "43" },
        { n: "SHUBHAM KASAHEB GAIKWAD", p: "9529373599", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "44" },
        { n: "SAKKARGI SHRADDHA SURENDRANATH", p: "8421259761", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "45" },
        { n: "PATIL NIKITA RAVINDRA", p: "8263019208", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "46" },
        { n: "AWARI SHREYASH VIJAY", p: "8857071220", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "47" },
        { n: "SHAIKH SIRAJ MAULA", p: "8600335089", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "48" },
        { n: "SONKAWADE RUDRAKSH PRADEEP", p: "7757920935", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "49" },
        { n: "SHRAVANI ARUN KARPE", p: "7499048679", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "50" },
        { n: "CHANDELE MANSI DNYANESHWAR", p: "9307344652", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "51" },
        { n: "DOKE SANSKRUTI ANAND", p: "7745044792", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "52" },
        { n: "DEVIKA SUNIL SONAR", p: "9579882656", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "53" },
        { n: "JADHAV MAYUR BANYABA", p: "8600413161", y: "1ST YEAR", b: "COMBINE", d: "Div-4", r: "54" },
        { n: "PANDIT AARNAV PARAG", p: "7775092617", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "1" },
        { n: "KADAM RUDRAKSHI ASHOKRAO", p: "8208402311", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "2" },
        { n: "GADHAVE AKSHAY VIKAS", p: "9373879462", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "3" },
        { n: "DADAS DIGVIJAY ARJUN", p: "9623800526", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "4" },
        { n: "JAGTAP ANKITA AMRUT", p: "7798166701", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "5" },
        { n: "SAMAKSH SACHIN KUNDEN", p: "7620621873", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "6" },
        { n: "KHADE ABHISHEK VITTHAL", p: "8459901486", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "7" },
        { n: "SHINDE SANKET SACHIN", p: "9834359142", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "8" },
        { n: "PRABHU SAKSHI GANESH", p: "9172798682", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "9" },
        { n: "PATIL GAYATRI NIVRUTTI", p: "9021990764", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "10" },
        { n: "NARAWADE HARSHAD EKNATH", p: "9423756624", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "11" },
        { n: "KOLHE ANKITA ARJUN", p: "8530630416", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "12" },
        { n: "AUTI HARSHAL SAMPAT", p: "7721983549", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "13" },
        { n: "SHINDE AARYA VIJAY", p: "9422746426", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "14" },
        { n: "JAGDALE TEJASWI BHAGWANT", p: "7709844959", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "15" },
        { n: "PALIWAL VIRAG HITENDRA", p: "7775035401", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "16" },
        { n: "MALI VAISHNAVI MANGESH", p: "9699684461", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "17" },
        { n: "WARKAD RUPESH RAVISHANKAR", p: "7038400956", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "18" },
        { n: "WAYKAR POONAM ARJUN", p: "9850116884", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "19" },
        { n: "CHAVAN VISHESH PRAVIN", p: "9405941974", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "20" },
        { n: "SANAP SHUBHAM SURESH", p: "7020212737", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "21" },
        { n: "PATIL SHASHANK KAILAS", p: "8485020583", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "22" },
        { n: "KAMBLE RUTUJA TUKARAM", p: "8766499208", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "23" },
        { n: "PATIL MANISH SUNIL", p: "9659369134", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "24" },
        { n: "BHUJBAL KARAN SANDIP", p: "9579876157", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "25" },
        { n: "JARWAL PRATHSH MANGALSING", p: "9270568789", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "26" },
        { n: "MUTHA SHRAVANI RAJENDRA", p: "7249660175", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "27" },
        { n: "KAIKADI VIDHI NARESH", p: "7391966783", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "28" },
        { n: "MAHADIK SHRADDHA SANTOSH", p: "7066155698", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "29" },
        { n: "RATHOD SUMIT PARAMDAS", p: "9322890439", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "30" },
        { n: "HINGMIRE SURAJ SANJAY", p: "7821006681", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "31" },
        { n: "BADE PRASAD SHIVAJI", p: "9021068462", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "32" },
        { n: "RATHOD ABHIJEET PRATAP", p: "9112931491", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "33" },
        { n: "SHINGARE SANSKAR SANTOSH", p: "9404486027", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "34" },
        { n: "SARATE JAYDEEP LAXMAN", p: "9028101704", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "35" },
        { n: "KURMELKAR CHAITANYA", p: "9356459370", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "36" },
        { n: "JADHAV VAIBHAV SANJAY", p: "7387052489", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "37" },
        { n: "TARALKAR VEDANT RAJU", p: "8180070531", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "38" },
        { n: "SHEDAGE MANASI SANJAY", p: "7276705929", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "39" },
        { n: "SHEWALE SAI PRABHAKAR", p: "7219293094", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "40" },
        { n: "SARGAM NAINISHA KAILASH", p: "7559498157", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "41" },
        { n: "NANGRE YADNESH ATUL", p: "9209504381", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "42" },
        { n: "POLE VIRAJ PANJABRAO", p: "7749388483", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "43" },
        { n: "KOLI ABHISHEK DATTATRAY", p: "7972338005", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "44" },
        { n: "GONGE KIRAN MADHUKAR", p: "9921351789", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "45" },
        { n: "BULE VIVEK ROHIDAS", p: "9021252479", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "46" },
        { n: "SHAIKH ALFIYA AFSAR", p: "9699502507", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "47" },
        { n: "KADAM HARSHAL SATISH", p: "7249203860", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "48" },
        { n: "BISEN OMKAR SHAILENDRASINGH", p: "8668811817", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "49" },
        { n: "ULHARE SIDDHI SANTOSH", p: "9518322788", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "50" },
        { n: "KONDE DEVENDRA SANTOSH", p: "7249796495", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "51" },
        { n: "BORIKAR SWARAJ RAJKUMAR", p: "7822969867", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "52" },
        { n: "PARTE SHLOKA SACHIN", p: "8484936998", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "53" },
        { n: "BIDKAR VEDANT KIRANKUMAR", p: "9822020123", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "54" },
        { n: "ADAGALE GAURAV SUNIL", p: "8624015033", y: "1ST YEAR", b: "COMBINE", d: "Div-5", r: "55" },
        { n: "MANKUMBARE SNEHAL SANTOSH", p: "9373190868", y: "1ST YEAR", b: "COMBINE", d: "Div-6", r: "1" },
        { n: "MANKAR PRANAV GANESH", p: "7249772167", y: "1ST YEAR", b: "COMBINE", d: "Div-6", r: "2" },
        { n: "KOTHALKAR MAYUR DIPAK", p: "8237103283", y: "1ST YEAR", b: "COMBINE", d: "Div-6", r: "3" },
        { n: "CHIKANE PRERANA PUNDLIK", p: "8379914535", y: "1ST YEAR", b: "COMBINE", d: "Div-6", r: "4" },
        { n: "SHIRSAT RAM NARAYAN", p: "9657123132", y: "1ST YEAR", b: "COMBINE", d: "Div-6", r: "5" },
        { n: "KURHADE DIKSHA SUNIL", p: "7620724241", y: "1ST YEAR", b: "COMBINE", d: "Div-6", r: "6" },
        { n: "POHAKAR SAHIL NIVRUTTI", p: "9373898211", y: "1ST YEAR", b: "COMBINE", d: "Div-6", r: "7" },
        { n: "AGLAWE MAYUR RAJU", p: "9359145599", y: "1ST YEAR", b: "COMBINE", d: "Div-6", r: "8" },
        { n: "SHETE SIDDHESH KIRAN", p: "9689893852", y: "1ST YEAR", b: "COMBINE", d: "Div-6", r: "9" },
        { n: "PUNDKARE SAMRUDDHI MOHAN", p: "9766388624", y: "1ST YEAR", b: "COMBINE", d: "Div-6", r: "10" },
        { n: "SUTAR SIDDHESH VINOD", p: "9270571010", y: "1ST YEAR", b: "COMBINE", d: "Div-6", r: "11" },
        { n: "PATIL SANGRAM SUNIL", p: "7758982501", y: "1ST YEAR", b: "COMBINE", d: "Div-6", r: "12" },
        { n: "NARAWADE HARSHAD EKNATH", p: "9423756624", y: "1ST YEAR", b: "COMBINE", d: "Div-6", r: "13" },
        { n: "KOTGIRE ADITYA DNYANESHWAR", p: "9075190075", y: "1ST YEAR", b: "COMBINE", d: "Div-6", r: "14" },
        { n: "DEVKAMBLE SAINATH RAMCHANDRA", p: "8830420637", y: "1ST YEAR", b: "COMBINE", d: "Div-6", r: "15" },
        { n: "PAWAR SHRAVANI SUDHIR", p: "7350044978", y: "1ST YEAR", b: "COMBINE", d: "Div-6", r: "16" },
        { n: "KHAIRNAR SHRUTI BHAGWAN", p: "9270107487", y: "1ST YEAR", b: "COMBINE", d: "Div-6", r: "17" },
        { n: "PADWAL RIDDHI PRAMOD", p: "8830369950", y: "1ST YEAR", b: "COMBINE", d: "Div-6", r: "18" },
        { n: "BANSODE ADITYA AAMSHIDA", p: "8767826524", y: "1ST YEAR", b: "COMBINE", d: "Div-6", r: "19" },
        { n: "CHOLE VAISHNAVI RAMKISHAN", p: "8975482815", y: "1ST YEAR", b: "COMBINE", d: "Div-6", r: "20" },
        { n: "GOSAVI RAJASHRI JAGADISH", p: "9028460344", y: "1ST YEAR", b: "COMBINE", d: "Div-6", r: "21" },
        { n: "EKAD SHUBHAM SANTOSH", p: "9307202644", y: "1ST YEAR", b: "COMBINE", d: "Div-6", r: "22" },
        { n: "SHELAKE SHRADDHA SUNIL", p: "8459952126", y: "1ST YEAR", b: "COMBINE", d: "Div-6", r: "23" },
        { n: "RODE RUSHIKESH ANIL", p: "8080157873", y: "1ST YEAR", b: "COMBINE", d: "Div-6", r: "24" },
        { n: "NAGRE ADIRAJ NANDKISHOR", p: "8412806189", y: "1ST YEAR", b: "COMBINE", d: "Div-6", r: "25" },
        { n: "SONAWANE PURVA PRAMOD", p: "9168017133", y: "1ST YEAR", b: "COMBINE", d: "Div-6", r: "26" },
        { n: "PARDESHI SHIVANI SANTOSH", p: "9145337517", y: "1ST YEAR", b: "COMBINE", d: "Div-6", r: "27" },
        { n: "NATVE SAKSHI SATYAJEET", p: "9764550626", y: "1ST YEAR", b: "COMBINE", d: "Div-6", r: "28" },
        { n: "SHARMA MAHEK DHARMENDRA", p: "8007796123", y: "1ST YEAR", b: "COMBINE", d: "Div-6", r: "29" },
        { n: "HAJARE POOJA SHIVSHANKAR", p: "9511680795", y: "1ST YEAR", b: "COMBINE", d: "Div-6", r: "30" },
        { n: "PATIL HIMAKSHI RAGHUNATH", p: "9172316717", y: "1ST YEAR", b: "COMBINE", d: "Div-6", r: "31" },
        { n: "HOLKAR YASH RAHUL", p: "9127976889", y: "1ST YEAR", b: "COMBINE", d: "Div-6", r: "32" },
        { n: "NALKAR KRUSHNA RAJENDRA", p: "8263810910", y: "1ST YEAR", b: "COMBINE", d: "Div-6", r: "33" },
        { n: "BARGE AVISHKAR JALINDAR", p: "9890688270", y: "1ST YEAR", b: "COMBINE", d: "Div-6", r: "34" },
        { n: "THAKRE NISARG JITENDRA", p: "8421171399", y: "1ST YEAR", b: "COMBINE", d: "Div-6", r: "35" },
        { n: "BORIKAR GAYATRI HARISHCHANDRA", p: "9960077710", y: "1ST YEAR", b: "COMBINE", d: "Div-6", r: "36" },
        { n: "ADHAV SHREYASH YASHWANT", p: "9021694460", y: "1ST YEAR", b: "COMBINE", d: "Div-6", r: "37" },
        { n: "NER JAYESH DEVIDAS", p: "9421501581", y: "1ST YEAR", b: "COMBINE", d: "Div-6", r: "38" },
        { n: "KSHIRSAGAR PRATIKSHA RAVINDRA", p: "7709955909", y: "1ST YEAR", b: "COMBINE", d: "Div-6", r: "39" },
        { n: "KAKAD SOJWAL PRADIP", p: "8999454967", y: "1ST YEAR", b: "COMBINE", d: "Div-6", r: "40" },
        { n: "JAGTAP DISHA KAILAS", p: "9657395131", y: "1ST YEAR", b: "COMBINE", d: "Div-6", r: "41" },
        { n: "DHAKANE SUHAS SHRIDHAR", p: "9021112484", y: "1ST YEAR", b: "COMBINE", d: "Div-6", r: "42" },
        { n: "CHAURPAGAR SAJAG RAJESH", p: "9923020181", y: "1ST YEAR", b: "COMBINE", d: "Div-6", r: "43" },
        { n: "BHANDARKAVATHEKAR PARAG P.", p: "9028272351", y: "1ST YEAR", b: "COMBINE", d: "Div-6", r: "44" },
        { n: "GARAD SANKET BHAGWAN", p: "7972036173", y: "1ST YEAR", b: "COMBINE", d: "Div-6", r: "45" },
        { n: "ADANE KAIWALYA SUDHIR", p: "8421515154", y: "1ST YEAR", b: "COMBINE", d: "Div-6", r: "46" },
        { n: "JAYBHAYE SAURABH RSH", p: "7666050224", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "1" },
        { n: "LANJEWAR ARYA MOHAN", p: "9604025955", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "2" },
        { n: "PATHADE BHAKTI", p: "9921746205", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "3" },
        { n: "DAUNDKAR DAKSH TUSHAR", p: "7517000512", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "4" },
        { n: "KARALE TANUJA MANOHAR", p: "9404283149", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "5" },
        { n: "GAWADE HARSHIT DHANAJI", p: "9850800545", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "6" },
        { n: "SANAP SHUBHAM MARUTI", p: "9022365118", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "7" },
        { n: "DEOTALE DIVYANJALI DILIP", p: "7559344292", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "8" },
        { n: "TAJNE VEDANT LOMESHWAR", p: "7030580411", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "9" },
        { n: "JAMDAR AISHWARYA SHANKAR", p: "7620927365", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "10" },
        { n: "BHAGAT POOJA SANTOSH", p: "7020197680", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "11" },
        { n: "YADAV OM RAGHUNATH", p: "8482997550", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "12" },
        { n: "AKHARE SAYALI SHYAM", p: "9209673278", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "13" },
        { n: "PINJARI ANUSHKA SHANKAR", p: "7558796598", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "14" },
        { n: "LABADE RUSHIKESH LAXMAN", p: "8080027979", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "15" },
        { n: "MALI PRERANA RAKESH", p: "9511279466", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "16" },
        { n: "JOGALE ADITYA ANIL", p: "7757004081", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "17" },
        { n: "BHOI PIYUSH SUNIL", p: "7058569492", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "18" },
        { n: "YEDAKE SANJOG SIDDHESHWAR", p: "9579907393", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "19" },
        { n: "KAMAT KUNAL", p: "9834858043", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "20" },
        { n: "POMAN AAKASH MANOHAR", p: "8459430473", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "21" },
        { n: "DHAMDHERE ARPITA GORAKSH", p: "9359310078", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "22" },
        { n: "KOTHEKAR SIDDHI NITINRAO", p: "8237103283", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "23" },
        { n: "BAGAD BHUMISHA RAJENDRA", p: "8080550288", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "24" },
        { n: "KAROD RANI ASHOK", p: "7423557718", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "25" },
        { n: "KAMBLE UDAYADITYA RAJU", p: "7038357310", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "26" },
        { n: "ZADE ADITYA RAVINDRA", p: "7558350459", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "27" },
        { n: "AVHAD DIVYA DHANRAJ", p: "7020706184", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "28" },
        { n: "SHINGADE ROHINI VINOD", p: "7387663696", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "29" },
        { n: "MIRGALE SHRUTI AMOL", p: "9699544163", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "30" },
        { n: "KADAJI VAISHNAVI MARUTI", p: "9373046912", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "31" },
        { n: "PATIL VIVEK YOGESH", p: "8830896331", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "32" },
        { n: "AWARI SAYALI RAHUL", p: "9284025916", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "33" },
        { n: "NAWALE PRADIP BHAUSAHEB", p: "8459080947", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "34" },
        { n: "WANGE SNEHAL BHAGWAT", p: "9022745885", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "35" },
        { n: "GEND PRERANA SANTOSH", p: "8010688878", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "36" },
        { n: "BICCHEWAR TANVI VIJAY", p: "9766105779", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "37" },
        { n: "KAPSE SAHIL SOMNATH", p: "8421941671", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "38" },
        { n: "SANGLE RAHUL DNYANDEV", p: "8261832036", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "39" },
        { n: "DINGARE DHRUVAA SACHIN", p: "9403289912", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "40" },
        { n: "KAKAD SAMARTH GAJANAN", p: "7972060729", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "41" },
        { n: "DARADE SIDDHARTH SANTOSH", p: "7276048371", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "42" },
        { n: "CHALAK RUTURAJ JANAK", p: "9860270311", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "43" },
        { n: "NAKHATE AKSHAY DAJIBA", p: "8668299498", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "44" },
        { n: "JAGTAP ANJANA VIJAY", p: "7057289040", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "45" },
        { n: "LONKAR ANSHUL BABAN", p: "7020536263", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "46" },
        { n: "SONAWANE ANUSHKA DEEPAK", p: "9209270130", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "47" },
        { n: "KHADTARE SHUBHAM NAVANATH", p: "9922396059", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "48" },
        { n: "KARANDE YASHRAJ VIKRAM", p: "7248976643", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "49" },
        { n: "SAKKARGI PIYUSH VASUDEO", p: "8856897812", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "50" },
        { n: "RUPWATE SARTHAK SUDHIR", p: "7499806406", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "51" },
        { n: "SAWANT ROSHAN RAHUL", p: "8999575150", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "52" },
        { n: "CHOUDHARI ONKAR BABAN", p: "7378852677", y: "1ST YEAR", b: "COMBINE", d: "Div-7", r: "53" },
        { n: "SHIRASKAR KALYANI SUNIL", p: "9172680735", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "1" },
        { n: "MULLA RIHAN RIYAJ", p: "9421123136", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "2" },
        { n: "YADAV APARNA VIDYADHAR", p: "5049328617", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "3" },
        { n: "SAI GANESH MALI", p: "9699793509", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "4" },
        { n: "LOLE PRANALI SOPAN", p: "8208919554", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "5" },
        { n: "MATE DNYANESHWARI RAVINDRA", p: "8421596076", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "6" },
        { n: "PHATANGARE SHRADDHA VASANT", p: "9209516121", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "7" },
        { n: "GAIKWAD ADESH GOKUL", p: "7887661529", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "8" },
        { n: "NAGAWADE SAKSHI NITIN", p: "9325708643", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "9" },
        { n: "MARKUNDE VISHAL JANKIRAM", p: "9307047923", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "10" },
        { n: "KADAM PRUTHVIRAJ ASHOK", p: "9322927137", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "11" },
        { n: "NAKADE SAMRUDDHI SURENDRA", p: "9307868844", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "12" },
        { n: "SAHANE PURVA BHAGAWAT", p: "9552737716", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "13" },
        { n: "MAHAMUNI SUMEDHA DHANANJAY", p: "9699925745", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "14" },
        { n: "ZITE TEJAS BHAUSAHEB", p: "7441161645", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "15" },
        { n: "BAIRAGI AJINKYA SUDHIR", p: "7493558779", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "16" },
        { n: "MAHALPURE SHRUTI RAVINDRA", p: "9730186799", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "17" },
        { n: "KAKADE PRATHMESH ASHOK", p: "9370937319", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "18" },
        { n: "DHANARIYA HARSHAL RUPARAM", p: "8788837041", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "19" },
        { n: "MOOLYA SAMRUDDHI SURESH", p: "9637314059", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "20" },
        { n: "SABALE PRASANNA RAJENDRA", p: "7276103914", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "21" },
        { n: "WAGH RAGINI VAIBHAV", p: "9657709472", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "22" },
        { n: "ABDURREHMAN SAAD", p: "8317536576", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "23" },
        { n: "GIR PARTH SANJAY", p: "7666361887", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "24" },
        { n: "GANORKAR TUSHAR SHYAM", p: "9284725481", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "25" },
        { n: "SHIRBHATE VAISHNAV SURESH", p: "8767898565", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "26" },
        { n: "SARVADE SHIVAM GANESH", p: "9284105320", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "27" },
        { n: "KALYANE RAJ MAHADEV", p: "9529430217", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "28" },
        { n: "THORAT PRERANA JAGDISH", p: "9158278583", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "29" },
        { n: "UBALE KSHITIJA NIVAS", p: "8261020095", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "30" },
        { n: "DEVARE NITIN RAJENDRA", p: "7820943032", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "31" },
        { n: "BHALERAO TARAN PRABHUDAS", p: "9356636924", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "32" },
        { n: "GHATKAR SAMARTH RAJENDRA", p: "7559269014", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "33" },
        { n: "YEWALE GAURI RAJENDRA", p: "8010039789", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "34" },
        { n: "VARAT ADITYA RAMHARI", p: "9405455987", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "35" },
        { n: "MALI MANOJ SHIVAJI", p: "8483059204", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "36" },
        { n: "KASHID AVISHKAR RSH", p: "7083726025", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "37" },
        { n: "PALKHEDE SAI VIJAY", p: "8623071548", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "38" },
        { n: "DEOTALE DIVYANI DEEPAK", p: "7559344292", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "39" },
        { n: "ATOLE RAJVARDHAN KAMLAKAR", p: "9021027314", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "40" },
        { n: "CHAVAN DAKSH VINAY", p: "8421117144", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "41" },
        { n: "CHOURE RITESH VIJAY", p: "9356395128", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "42" },
        { n: "EKBOTE SNEHAL SHRINIVAS", p: "8263095932", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "43" },
        { n: "BIRADAR RUDRAYANI SANTOSH", p: "9422114544", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "44" },
        { n: "VIBHUTE SAKSHI SANJAY", p: "7507708204", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "45" },
        { n: "PALKHEDE SHRADDHA VIJAY", p: "9326735683", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "46" },
        { n: "PATIL CHAITANYA UDAYSINH", p: "7499550553", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "47" },
        { n: "BAGAL CHAITANYA AVINASH", p: "9921902408", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "48" },
        { n: "MUNDE MAHESH LAHUDAS", p: "7756935824", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "49" },
        { n: "TARU ADITYA RAJENDRA", p: "9699456246", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "50" },
        { n: "SHINDE ARYAN ANIL", p: "8625903817", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "51" },
        { n: "MORE ROHIT DINESH", p: "9561228499", y: "1ST YEAR", b: "COMBINE", d: "Div-8", r: "52" }
         ];

   const DB = {
        students: JSON.parse(localStorage.getItem('sits_pro_std_v2')) || INITIAL_STUDENTS,
        records: JSON.parse(localStorage.getItem('sits_pro_rec_v2')) || [],
        leaves: JSON.parse(localStorage.getItem('sits_pro_lev_v2')) || [],
        issues: JSON.parse(localStorage.getItem('sits_pro_issues_v1')) || [], 
        notices: JSON.parse(localStorage.getItem('sits_pro_not_v2')) || [],
        messages: JSON.parse(localStorage.getItem('sits_pro_msgs_v1')) || [],
        
        grid: JSON.parse(localStorage.getItem('sits_pro_grid_v2')) || [ 
            ["Time", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"], 
            ["10:00", "Maths", "Phy", "BEE", "Mech", "BEE", "Phy"], 
            ["11:00", "Phy", "Maths", "Mech", "BEE", "Maths", "Mech"], 
            ["12:00", "LUNCH", "LUNCH", "LUNCH", "LUNCH", "LUNCH", "LUNCH"], 
            ["01:00", "Mech", "BEE", "Prog", "Phy", "Prog", "Sports"] 
        ],
        lms: JSON.parse(localStorage.getItem('sits_pro_lms_v2')) || [],
        submissions: JSON.parse(localStorage.getItem('sits_pro_subs_v1')) || [],
        applications: JSON.parse(localStorage.getItem('sits_pro_apps_v2')) || [],
        divisions: ["Div-1","Div-2","Div-3","Div-4","Div-5","Div-6","Div-7","Div-8"],
        subjects: [
            "Engineering Maths 1", "Physics", "Programming", "Chemistry", 
            "Graphics", "BXE", "Mechanics", "Electrical", "Engineering Maths 2"
        ],
        placements: JSON.parse(localStorage.getItem('sits_pro_jobs_real_v1')) || [
            { 
            id: 101, role: "Web Development Intern", 
            co: "Internshala", loc: "Work From Home", 
            dur: "3 Months", stip: "10,000 /Mo", 
            dl: "2026-02-28", type: "Internship", 
            mode: "EXTERNAL", link: "https://internshala.com" 
        },
            { 
                id: 102, role: "React Native Developer", 
                co: "Zomato", loc: "Gurgaon", 
                dur: "6 Months", stip: "25,000 /Mo", 
                dl: "2026-03-10", type: "Full Time", 
                mode: "INTERNAL", link: "" }
        ]
    };

    function saveDB() {
        localStorage.setItem('sits_pro_std_v2', JSON.stringify(DB.students));
        localStorage.setItem('sits_pro_rec_v2', JSON.stringify(DB.records));
        localStorage.setItem('sits_pro_lev_v2', JSON.stringify(DB.leaves));
        localStorage.setItem('sits_pro_not_v2', JSON.stringify(DB.notices));
        localStorage.setItem('sits_pro_grid_v2', JSON.stringify(DB.grid));
        localStorage.setItem('sits_pro_lms_v2', JSON.stringify(DB.lms));
        localStorage.setItem('sits_pro_subs_v1', JSON.stringify(DB.submissions));
        localStorage.setItem('sits_pro_apps_v2', JSON.stringify(DB.applications)); 
        localStorage.setItem('sits_pro_jobs_real_v1', JSON.stringify(DB.placements));
        localStorage.setItem('sits_pro_issues_v1', JSON.stringify(DB.issues));
        // --- NEW SAVE ---
        localStorage.setItem('sits_pro_msgs_v1', JSON.stringify(DB.messages));
    }


    function toggleSidebar() {
        document.getElementById('sidebar').classList.toggle('active');
        document.querySelector('.sidebar-overlay').classList.toggle('active');
    }

    function handleLogin() {
        const id = document.getElementById('loginID').value.trim();
        const pass = document.getElementById('loginPass').value.trim();
        
        if(id==="admin@sits.com" && pass==="admin") {
            activeUser = {role:"ADMIN", n:"Admin"};
            playWelcomeAudio(activeUser); 
            loadDashboard();
        } else if(id==="teacher@sits.com" && pass==="1234") {
            activeUser = {role:"TEACHER", n:"Faculty Member"};
            playWelcomeAudio(activeUser); 
            loadDashboard();
        } else {
            const st = DB.students.find(s => s.p === id || `P-${s.p}` === id);
            
            if(st && (pass==="1234" || pass==="parent")) { 
                activeUser = {...st, role: pass==="parent"?"PARENT":"STUDENT"}; 
                playWelcomeAudio(activeUser); 
                loadDashboard(); 
            } else {
                alert("Invalid Credentials. Students: Use Phone Number as ID.");
            }
        }
    }
    function playWelcomeAudio(user) {
        let text = "";
        
        if (user.role === "STUDENT") {
            let year = user.y.replace("1ST", "First").replace("2ND", "Second").replace("3RD", "Third").replace("4TH", "Fourth");
            let div = user.d.replace(" ");
            
            text = `${user.n}, ${year}, ${div} student, Welcome to Sinhgad Institute of Technology and Science ( S I T S ) Platform Developed By Shubham Sanap 1228 `;
        } else {
            text = `Welcome ${user.n} to Sinhgad Institute of Technology and Science ( S I T S )  Platform Developed By Shubham Sanap 1228`;
        }

        window.speechSynthesis.cancel();

        const speech = new SpeechSynthesisUtterance(text);
        speech.lang = "en-IN"; 
        speech.volume = 1;     
        speech.rate = 0.9;     
        speech.pitch = 1;      
        
        window.speechSynthesis.speak(speech);
    }
function loadDashboard() {
    document.getElementById('authScreen').style.display = 'none';
    document.getElementById('sidebar').style.display = 'flex';
    document.getElementById('mainContent').style.display = 'block';
    
    document.getElementById('sideName').innerText = activeUser.n;
    document.getElementById('sideRole').innerText = activeUser.role;
    document.getElementById('sideAvatar').innerText = activeUser.n.charAt(0);
    document.getElementById('dashName').innerText = activeUser.n.split(' ')[0];
    
    if(DB.notices.length) {
        document.getElementById('noticeWidget').style.display = 'block';
        document.getElementById('noticeText').innerText = DB.notices[0].txt;
        document.getElementById('noticeDate').innerText = DB.notices[0].date;
    }

    const nav = document.getElementById('navLinks');
    nav.innerHTML = "";
    
    if(activeUser.role === "ADMIN") {
        nav.innerHTML += `<div class="nav-link active" onclick="showPage('admin'); toggleSidebar()">
            <i class="fa fa-cogs"></i> Admin Control</div>`;
            
        nav.innerHTML += `<div class="nav-link" onclick="showPage('placement'); toggleSidebar(); renderJobs();">
            <i class="fa fa-briefcase"></i> Placements (Admin)</div>`;
            
        handleYearChange('aYear', 'aBranch'); 
        refreshAdminView(); 
        renderAdminIssues(); 
        renderLeaveRequests('adminLeaveTable'); 
        showPage('admin');
    } 
    else if(activeUser.role === "TEACHER") {
        nav.innerHTML += `<div class="nav-link active" onclick="showPage('teacher'); toggleSidebar()">
            <i class="fa fa-chalkboard-teacher"></i> Faculty Dashboard</div>`;
        handleYearChange('tYear', 'tBranch'); 
        updateClock(); 
        renderLeaveRequests('teacherLeaveTable'); 
        showPage('teacher');
    } 
    else {
        nav.innerHTML += `<div class="nav-link active" onclick="showPage('student'); toggleSidebar()">
            <i class="fa fa-user-graduate"></i> Student Portal</div>`;
        
        nav.innerHTML += `<div class="nav-link" onclick="showPage('placement'); toggleSidebar(); renderJobs();">
            <i class="fa fa-briefcase"></i> Internships & Jobs</div>`;

        nav.innerHTML += `<div class="nav-link" onclick="openAboutCollege(); toggleSidebar();">
            <i class="fa fa-university"></i> About College</div>`;

        nav.innerHTML += `<div class="nav-link" onclick="openStudyMaterial(); toggleSidebar();">
            <i class="fa fa-book-reader"></i> Online Study Material</div>`;

        nav.innerHTML += `<div class="nav-link" onclick="openUniversityLogin(); toggleSidebar();">
            <i class="fa fa-graduation-cap"></i> University Login</div>`;
            
        document.getElementById('stDetails').innerText = `${activeUser.y} | ${activeUser.b} | Roll: ${activeUser.r} | ${activeUser.d}`;
        const feeBadge = document.getElementById('stFeeBadge');
        feeBadge.innerText = activeUser.fee === 'Paid' ? 'Fees Paid' : 'Fees Pending';
        feeBadge.className = activeUser.fee === 'Paid' ? 'tag tag-p' : 'tag tag-pend';
        
        renderStudentStats();
        renderStudentMarks();
        renderStudentLMS();
        renderStudentSelfDocs();
        
        setTimeout(() => renderJobs(), 100); 
        
        showPage('student');
    }
}
  function showPage(id) { 
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active')); 
    
    const target = document.getElementById(id + 'Page');
    if(target) {
        target.classList.add('active'); 
    } else {
        console.error("Page not found:", id + "Page");
    }
}
    function openModal(id) { document.getElementById(id).style.display = 'flex'; }
    function closeModal(id) { document.getElementById(id).style.display = 'none'; }
    function toggleTheme() { document.body.classList.toggle('dark'); }
    
    function updateClock() {
        document.getElementById('clockDisplay').innerText = new Date().toLocaleTimeString();
        setTimeout(updateClock, 1000);
    }
function handleYearChange(yId, bId) {
    const y = document.getElementById(yId).value;
    const b = document.getElementById(bId);
    
    b.innerHTML = (y === "1ST YEAR" ? ["COMBINE"] : ["IT", "CS", "ENTC", "MECH", "CIVIL"])
        .map(x => `<option>${x}</option>`).join('');

    const divSelectId = yId === 'aYear' ? 'aDiv' : 'tDiv';
    const divSelect = document.getElementById(divSelectId);
    divSelect.innerHTML = DB.divisions.map(d => `<option>${d}</option>`).join('');

    if (yId === 'aYear') {
        refreshAdminView();
    }

    if (yId === 'tYear') {
        divSelect.onchange = () => {
            renderLeaveRequests('teacherLeaveTable');
            refreshTeacherClassList(); 
        };
        renderLeaveRequests('teacherLeaveTable');
        refreshTeacherClassList(); 
    }
    
    if (yId !== 'aYear') {
        document.getElementById('tSub').innerHTML = DB.subjects
            .map(s => `<option>${s}</option>`).join('');
    }
}
function refreshTeacherClassList() {
    const div = document.getElementById('tDiv').value;
    const branch = document.getElementById('tBranch').value;
    const year = document.getElementById('tYear').value;
    const list = DB.students.filter(s => s.y === year && s.b === branch && s.d === div)
                            .sort((a,b) => a.r - b.r);

    const tbody = document.getElementById('teacherStudentTable');
    if(!tbody) return;

    if(list.length === 0) {
        tbody.innerHTML = `<tr><td colspan="4" style="text-align:center; padding:20px; 
            color:var(--text-muted);">No students found for ${year} ${div}.</td></tr>`;
        return;
    }

    tbody.innerHTML = list.map(s => {
        const docCount = s.docs ? Object.keys(s.docs).length : 0;
        const docBadge = docCount > 0 
            ? `<span class="tag tag-p" style="font-size:10px;">${docCount} File(s)</span>`
            : `<span style="color:#ccc; font-size:11px;">-</span>`;

        return `
        <tr>
            <td><strong>${s.r}</strong></td>
            <td>
                <div style="font-weight:600; color:var(--text-main);">${s.n}</div>
                <div style="font-size:11px; color:var(--text-muted);">${s.p}</div>
            </td>
            <td>${docBadge}</td>
            <td>
                <div style="display:flex; gap:5px;">
                    <button class="btn btn-s" style="padding:6px 12px; font-size:12px;" onclick="openProfile('${s.p}')">
                        <i class="fa fa-eye"></i> View
                    </button>
                    <button class="btn btn-w" style="padding:6px 12px; font-size:12px;" onclick="openMessageModal('${s.p}', '${s.n}')">
                        <i class="fa fa-comment-dots"></i> Message
                    </button>
                </div>
            </td>
        </tr>`;
    }).join('');
}
 function refreshAdminView() {
    const y = document.getElementById('aYear').value;
    const b = document.getElementById('aBranch').value;
    const d = document.getElementById('aDiv').value;
    
    const list = DB.students.filter(s => s.y===y && s.b===b && s.d===d).sort((x,z) => x.r - z.r);
    
    document.getElementById('adminStudentTable').innerHTML = `
    <thead><tr><th>R</th><th>Name</th><th>Status</th><th>Actions</th></tr></thead><tbody>` + 
    list.map(s => `
        <tr>
            <td><strong>${s.r}</strong></td>
            <td>
                <div style="font-weight:600;">${s.n}</div>
                <small style="color:var(--text-muted);">${s.p}</small>
            </td>
            <td><span class="tag ${s.fee==='Paid'?'tag-p':'tag-pend'}">${s.fee||'Pending'}</span></td>
            <td>
                <div style="display:flex; gap:5px;">
                    <button class="btn btn-s" style="padding:5px 10px;" onclick="openProfile('${s.p}')" title="View Profile">
                        <i class="fa fa-eye"></i>
                    </button>
                    <button class="btn btn-w" style="padding:5px 10px;" onclick="openMessageModal('${s.p}', '${s.n}')" title="Message Student">
                        <i class="fa fa-comment-alt"></i>
                    </button>
                    <button class="btn btn-d" style="padding:5px 10px;" onclick="delStudent('${s.p}')" title="Delete">
                        <i class="fa fa-trash"></i>
                    </button>
                </div>
            </td>
        </tr>`).join('') + "</tbody>";

    animateLists();
}

let currentProfileUser = null;

function openProfile(phone) {
    const s = DB.students.find(st => st.p == phone);
    if(!s) return;
    
    currentProfileUser = s;
    
    document.getElementById('profAvatar').innerText = s.n.charAt(0);
    document.getElementById('profName').innerText = s.n;
    document.getElementById('profSubtitle').innerText = `${s.y} | ${s.b} | ${s.d} | Roll: ${s.r}`;
    
    const p = s.personal || {};
    const c = s.contact || {};
    
    document.getElementById('profInfoGrid').innerHTML = `
        <div class="info-item"><label>Full Name</label><div>${s.n}</div></div>
        <div class="info-item"><label>Roll Number</label><div>${s.r}</div></div>
        <div class="info-item"><label>Mobile</label><div>${s.p}</div></div>
        <div class="info-item"><label>Email</label><div>${c.email || '-'}</div></div>
        <div class="info-item"><label>Address</label><div>${p.addr || '-'}</div></div>
        <div class="info-item"><label>Father's Name</label><div>${p.father || '-'}</div></div>
        <div class="info-item"><label>Mother's Name</label><div>${p.mother || '-'}</div></div>
        <div class="info-item"><label>Father's Occupation</label><div>${p.occ || '-'}</div></div>
        <div class="info-item"><label>Parent Contact</label><div>${c.parent || '-'}</div></div>
        <div class="info-item"><label>Emergency Contact</label><div>${c.emergency || '-'}</div></div>
    `;

    const docs = s.docs || {};
    const docRows = Object.keys(docs).map(key => `
        <tr>
            <td><div style="font-weight:600;">${key}</div><small>${docs[key].fileName}</small></td>
            <td><span class="tag tag-p">Uploaded</span></td>
            <td>
                <button class="btn btn-p" style="padding:5px 10px; font-size:12px;" onclick="viewDocument('${docs[key].fileName}')">
                    <i class="fa fa-eye"></i> View
                </button>
            </td>
        </tr>
    `).join('');
    
    document.querySelector('#profDocTable tbody').innerHTML = docRows || 
    '<tr><td colspan="3" style="text-align:center; padding:20px;">No documents uploaded.</td></tr>';

    openModal('profileModal');
}

function switchProfileTab(tabId) {
    document.querySelectorAll('.prof-tab').forEach(t => t.style.display = 'none');
    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
    document.getElementById(tabId).style.display = 'block';
    event.target.classList.add('active');
}

function viewDocument(fileName) {
    alert("Simulating preview for: " + fileName + "\n\n(In a real backend, this would open the PDF/Image)");
}

const originalOpenModal = window.openModal;
window.openModal = function(id) {
    if(id === 'admissionModal') {
        renderDocUploads();
        handleAdmissionYear();
    }
    document.getElementById(id).style.display = 'flex';
}
function submitAdmission() {
    const year = document.getElementById('admYear').value;
    const branch = document.getElementById('admBranch').value; 
    const div = document.getElementById('admDiv').value;
    const roll = document.getElementById('admRoll').value;
    const fee = document.getElementById('admFee').value;
    
    const student = {
        n: document.getElementById('admName').value,
        p: document.getElementById('admPhone').value,
        r: roll,
        y: year,
        b: branch,
        d: div,
        fee: fee,
        personal: {
            father: document.getElementById('admFather').value,
            mother: document.getElementById('admMother').value,
            occ: document.getElementById('admOcc').value,
            addr: document.getElementById('admAddr').value
        },
        contact: {
            email: document.getElementById('admEmail').value,
            parent: document.getElementById('admParPhone').value,
            emergency: document.getElementById('admEmgPhone').value
        },
        docs: {}
        
    };

    if(!student.n || !student.p || !student.r) {
        alert("Please fill at least Name, Phone, and Roll Number.");
        return;
    }

    const inputs = document.querySelectorAll('.doc-upload-item input[type="file"]');
    inputs.forEach((inp, index) => {
        if(inp.files.length > 0) {
            const docName = REQUIRED_DOCS[index];
            student.docs[docName] = {
                fileName: inp.files[0].name,
                uploaded: true,
                date: new Date().toLocaleDateString()
            };
        }
    });

    DB.students.push(student);
    saveDB();
    refreshAdminView();
    closeModal('admissionModal');
    alert("Student Admission Successful!");
}

    function delStudent(p) { 
        if(confirm("Delete?")) { 
            DB.students = DB.students.filter(s => s.p !== p); 
            saveDB(); 
            refreshAdminView(); 
        } 
    }

    function openTimetableModal() {
        const isAdmin = activeUser.role === 'ADMIN' || activeUser.role === 'TEACHER'; 
        document.getElementById('ttAdminControls').style.display = isAdmin ? 'flex' : 'none';
        renderTimetable(isAdmin); 
        openModal('timetableModal');
    }

   function renderLeaveRequests(tid) {
        let list = DB.leaves.map((l, index) => ({ ...l, originalIndex: index }));

        if (activeUser && activeUser.role === 'TEACHER') {
            const currentDiv = document.getElementById('tDiv').value;
            if (currentDiv) {
                list = list.filter(l => l.div === currentDiv);
            }
        }

        let html = `<thead>
            <tr>
                <th style="text-align:left; padding-left:20px;">Student Details</th>
                <th>Reason</th>
                <th>Date</th>
                <th>Status</th>
                <th>Action</th>
            </tr>
        </thead><tbody>`;

        if (list.length === 0) {
            html += `<tr><td colspan="5" style="text-align:center; color:var(--text-muted); 
                padding:25px;">No leave requests found for this Division.</td></tr>`;
        } else {
            list.sort((a, b) => (a.status === 'Pending' ? -1 : 1));

            html += list.map(l => `
                <tr style="border-bottom: 1px solid rgba(0,0,0,0.05);">
                    <td style="text-align:left; padding: 15px 20px;">
                        <div style="font-weight:700; color:var(--text-main); font-size:14px; margin-bottom:4px;">
                            ${l.name.toUpperCase()}
                        </div>
                        <div style="font-size:12px; color:var(--text-muted);">
                            ${l.div} <span style="opacity:0.3; margin:0 4px;">|</span> Roll: ${l.roll}
                        </div>
                    </td>
                    <td style="font-weight:600; font-size:13px; color:#475569; text-transform:uppercase;">
                        ${l.reason}
                    </td>
                    <td style="font-weight:600; color:var(--text-main);">
                        ${l.date}
                    </td>
                    <td>
                        <span style="
                            padding: 6px 16px; 
                            border-radius: 50px; 
                            font-size: 11px; 
                            font-weight: 800; 
                            letter-spacing: 0.5px; 
                            text-transform: uppercase;
                            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
                            ${l.status === 'Approved' ? 'background:#dcfce7; color:#16a34a;' : 
                             (l.status === 'Rejected' ? 'background:#fee2e2; color:#ef4444;' : 
                             'background:#fef3c7; color:#d97706;')}">
                            ${l.status}
                        </span>
                    </td>
                    <td>
                        ${l.status === 'Pending' ? `
                        <div style="display:flex; gap:8px; justify-content:center;">
                            <button onclick="updateLeave(${l.originalIndex}, 'Approved')" 
                                style="background:#10b981; color:white; border:none; 
                                padding:8px 16px; border-radius:50px; cursor:pointer; font-weight:600; display:flex; 
                                align-items:center; gap:6px; font-size:12px; box-shadow:0 4px 10px rgba(16,185,129,0.2);">
                                <i class="fa fa-check"></i> Allow
                            </button>
                            <button onclick="updateLeave(${l.originalIndex}, 'Rejected')" 
                                style="background:rgba(239,68,68,0.1); color:#ef4444; border:1px solid #ef4444;
                                padding:8px 16px; border-radius:50px; cursor:pointer; font-weight:600; 
                                display:flex; align-items:center; gap:6px; font-size:12px;">
                                <i class="fa fa-times"></i> Deny
                            </button>
                        </div>
                        ` : '<span style="color:var(--text-muted); font-size:20px;">-</span>'}
                    </td>
                </tr>`).join('');
        }

        document.getElementById(tid).innerHTML = html + "</tbody>";
    }

    function updateLeave(idx, status) {
        if (DB.leaves[idx]) {
            DB.leaves[idx].status = status;
            saveDB();
            
            if (activeUser.role === 'ADMIN') renderLeaveRequests('adminLeaveTable');
            if (activeUser.role === 'TEACHER') renderLeaveRequests('teacherLeaveTable');
        }
    }

    function addTtRow() { DB.grid.push(new Array(DB.grid[0].length).fill("")); renderTimetable(true); }
    function addTtCol() { DB.grid.forEach(row => row.push("")); renderTimetable(true); }
    function removeTtRow(idx) { if(confirm("Del Row?")) 
    { DB.grid.splice(idx,1); renderTimetable(true); } 
}
    function removeTtCol(idx) { 
        if(confirm("Del Col?")) 
        { DB.grid.forEach(row => row.splice(idx,1)); renderTimetable(true); } 
    }
    function saveTimetable() { saveDB(); alert("Timetable Updated"); closeModal('timetableModal'); }

    function openAttendanceModal() { 
        document.getElementById('attDate').valueAsDate = new Date(); 
        renderAttendanceLedger(); 
        openModal('attModal'); 
    }

    function saveAttendance() {
        const d = document.getElementById('tDiv').value;
        const s = document.getElementById('tSub').value;
        const dt = document.getElementById('attDate').value;
        const absInput = document.getElementById('absentRolls').value;
        const abs = absInput ? absInput.split(',').map(x=>x.trim()) : [];
        
        DB.records.push({ type: 'ATT', div: d, sub: s, date: dt, abs: abs });
        saveDB(); 
        renderAttendanceLedger(); 
        alert("Attendance Saved");
    }

    function renderAttendanceLedger() {
        const div = document.getElementById('tDiv').value;
        const sub = document.getElementById('tSub').value;
        const branch = document.getElementById('tBranch').value;
        const year = document.getElementById('tYear').value;
        const mIdx = parseInt(document.getElementById('viewMonth').value);
        const months = ["January","February","March","April","May","June","July","August","September","October","November","December"];
        
        document.getElementById('pYear').innerText = year;
        document.getElementById('pBranch').innerText = branch;
        document.getElementById('pDiv').innerText = div;
        document.getElementById('pSub').innerText = sub;
        document.getElementById('pMonth').innerText = months[mIdx];
        document.getElementById('pDate').innerText = new Date().toLocaleDateString();
        document.getElementById('pFac').innerText = activeUser ? activeUser.n : "Faculty";

        const currentYear = new Date().getFullYear();
        const daysInMonth = new Date(currentYear, mIdx + 1, 0).getDate();
        const list = DB.students.filter(s => s.d === div).sort((a,b)=>a.r-b.r);
        
        let html = `<thead><tr><th style="width:30px">R</th><th>Student Name</th>`;
        for(let i=1; i<=daysInMonth; i++) html += `<th style="font-size:9px; width:20px;">${i}</th>`;
        html += `<th>%</th></tr></thead><tbody>`;
        
        list.forEach(st => {
            let p=0, t=0;
            html += `<tr><td>${st.r}</td><td>${st.n}</td>`;
            for(let i=1; i<=daysInMonth; i++) {
                const rec = DB.records.find(r => {
                    if(r.type!=='ATT' || r.div!==div || r.sub!==sub) return false;
                    const parts = r.date.split('-'); 
                    return parseInt(parts[1])-1 === mIdx && parseInt(parts[2]) === i;
                });
                if(rec) { 
                    t++; 
                    if(rec.abs.includes(st.r)) { html+=`<td style="color:red;font-weight:bold;background:#fee">A</td>`; } 
                    else { p++; html+=`<td style="color:green">P</td>`; } 
                }
                else html += `<td></td>`;
            }
            html += `<td>${t?Math.round((p/t)*100):0}%</td></tr>`;
        });
        document.getElementById('ledgerTable').innerHTML = html + "</tbody>";
    }

    function exportToExcel(tid, name) { 
        const wb = XLSX.utils.table_to_book(document.getElementById(tid), {sheet: "Sheet1"}); 
        XLSX.writeFile(wb, `${name}.xlsx`); 
    }

    function openMarksModal() {
        const d = document.getElementById('tDiv').value;
        const list = DB.students.filter(s => s.d === d).sort((a,b)=>a.r-b.r);
        
        let h = `<tr><th>Roll</th><th>Name</th>${markCols.map(c=>`<th>${c}</th>`).join('')}</tr>`;
        
        let b = list.map(st => `<tr><td>${st.r}</td><td>${st.n}</td>` + markCols.map(c => {
            const rec = DB.records.find(r => r.type==='MRK' && r.roll===st.r && r.col===c && r.sub===document.getElementById('tSub').value);
            return `<td><input class="marks-inp" data-r="${st.r}" data-c="${c}" value="${rec ? rec.val : ""}" style="width:50px"></td>`;
        }).join('') + `</tr>`).join('');
        
        document.getElementById('marksDataTable').innerHTML = `<thead>${h}</thead><tbody>${b}</tbody>`; 
        openModal('marksModal');
    }
    
    function printAttendance() {
        document.body.classList.add('printing-att');
        window.print();
        setTimeout(() => document.body.classList.remove('printing-att'), 500);
    }
    
    function printMarks() {
        const div = document.getElementById('tDiv').value;
        const sub = document.getElementById('tSub').value;
        const branch = document.getElementById('tBranch').value;
        const year = document.getElementById('tYear').value;
        
        document.getElementById('mYear').innerText = year;
        document.getElementById('mBranch').innerText = branch;
        document.getElementById('mDiv').innerText = div;
        document.getElementById('mSub').innerText = sub;
        document.getElementById('mFac').innerText = activeUser ? activeUser.n : "Faculty";
        document.getElementById('mDate').innerText = new Date().toLocaleDateString();

        const list = DB.students.filter(s => s.d === div).sort((a,b)=>a.r-b.r);
        
        let h = `<thead><tr><th style="width:30px;">R</th><th>Student Name</th>${markCols.map(c=>`<th>${c}</th>`).join('')}</tr></thead>`;
        
        let b = `<tbody>` + list.map(st => `<tr><td>${st.r}</td><td style="text-align:left;">${st.n}</td>` + markCols.map(c => {
            const rec = DB.records.find(r => r.type==='MRK' && r.roll===st.r && r.col===c && r.sub===sub);
            return `<td>${rec ? rec.val : "-"}</td>`;
        }).join('') + `</tr>`).join('') + `</tbody>`;

        document.getElementById('printMarksTable').innerHTML = h + b;
        document.getElementById('printableAreaMarks').style.display = 'block';
        
        document.body.classList.add('printing-marks');
        window.print();
        setTimeout(() => {
            document.body.classList.remove('printing-marks');
            document.getElementById('printableAreaMarks').style.display = 'none';
        }, 500);
    }

    function commitMarks() {
        const sub = document.getElementById('tSub').value;
        const div = document.getElementById('tDiv').value;
        
        document.querySelectorAll('.marks-inp').forEach(i => {
            if(i.value) {
                const existingIdx = DB.records.findIndex(r => 
                r.type==='MRK' && r.roll===i.dataset.r && r.col===i.dataset.c && r.sub===sub);
                if(existingIdx > -1) DB.records.splice(existingIdx, 1);
                
                DB.records.push({
                    type:'MRK', 
                    roll: i.dataset.r, 
                    col: i.dataset.c, 
                    val: i.value, 
                    sub: sub, 
                    div: div 
                });
            }
        });
        
        saveDB(); 
        alert("Marks Saved"); 
        closeModal('marksModal');
    }

    function addExamColumn() { 
        const val = document.getElementById('newExamCol').value;
        if(val && !markCols.includes(val)) { 
            markCols.push(val); 
            openMarksModal(); 
        } 
    }

    function uploadLms() {
        const title = document.getElementById('lmsTitle').value;
        const type = document.getElementById('lmsType').value;
        const div = document.getElementById('tDiv').value;
        const linkVal = document.getElementById('lmsLink').value;
        const fileInput = document.getElementById('lmsFileLocal');
        
        if(!title) { alert("Please enter a Title"); return; }

        let resourceLink = "#";
        let isFile = false;

        if(fileInput.files.length > 0) {
            resourceLink = fileInput.files[0].name;
            isFile = true;
        } else if (linkVal) {
            resourceLink = linkVal;
        }

        DB.lms.push({ 
            title: title, 
            type: type, 
            div: div, 
            link: resourceLink, 
            isFile: isFile, 
            date: new Date().toLocaleDateString() 
        });
        
        saveDB(); 
        alert("Resource Uploaded Successfully"); 
        closeModal('lmsModal');
        
        document.getElementById('lmsTitle').value = "";
        document.getElementById('lmsLink').value = "";
        document.getElementById('lmsFileLocal').value = "";
    }

 function renderStudentStats() {
    const myAttRecords = DB.records.filter(r => r.type === 'ATT' && r.div === activeUser.d);
    let present = 0, total = 0;
    let html = "";
    
    myAttRecords.forEach(r => {
        total++;
        const isAbsent = r.abs.includes(activeUser.r);
        if (!isAbsent) present++;
        html += `<tr><td>${r.date}</td><td>${r.sub}</td><td><span class="tag 
          ${isAbsent ? 'tag-a' : 'tag-p'}">${isAbsent ? 'Absent' : 'Present'}</span></td></tr>`;
    });

    const pct = total > 0 ? Math.round((present / total) * 100) : 0;
    const chart = document.getElementById('stAttChart');
    chart.style.setProperty('--p', `${pct * 3.6}deg`); 
    chart.setAttribute('data-val', `${pct}%`);
    document.querySelector('#stAttTable tbody').innerHTML = html.split('</tr>').reverse().join('</tr>');

    animateLists(); 
}

 function renderStudentMarks() {
    const myMarks = DB.records.filter(r => r.type === 'MRK' && r.roll === activeUser.r);
    let html = "";
    
    if(myMarks.length === 0) {
        html = "<tr><td colspan='3' style='text-align:center'>No marks uploaded yet.</td></tr>";
    } else {
        myMarks.forEach(m => {
            html += `<tr><td>${m.sub}</td><td>${m.col}</td><td style="font-weight:bold">${m.val}</td></tr>`;
        });
    }
    document.querySelector('#stGradesTable tbody').innerHTML = html;

    animateLists(); 
}

function renderStudentLMS() {
    const myLms = DB.lms.filter(l => l.div === activeUser.d);
    let html = "";
    
    if(myLms.length === 0) {
        html = "<tr><td colspan='3' style='text-align:center; padding:15px; color:var(--text-muted);'>No resources available.</td></tr>";
    } else {
        myLms.forEach(l => {
            const lmsId = l.id || l.title; 
            const existingSub = DB.submissions.find(s => s.lmsId == lmsId && s.studentRoll === activeUser.r);
            
            let actionBtn = "";
            
            if (l.type === "Assignment") {
                if (existingSub) {
                    actionBtn = `<span class="tag tag-p"><i class="fa fa-check"></i> Turned In</span>`;
                } else {
                    actionBtn = `<button class="btn btn-p" style="padding:6px 12px; font-size:11px;" 
                    onclick="openSubmitModal('${lmsId}', '${l.title}')">
                        <i class="fa fa-upload"></i> Submit
                    </button>`;
                }
            } 
            else {
                if(l.isFile) {
                    actionBtn = `<button class="btn btn-s" style="padding:4px 10px; font-size:11px;" onclick="downloadSimulatedFile('${l.link}')">
                        <i class="fa fa-download"></i> Download
                    </button>`;
                } else {
                    actionBtn = `<a href="${l.link}" target="_blank" class="btn btn-w" style="padding:4px 10px; font-size:11px; text-decoration:none;">
                        <i class="fa fa-external-link-alt"></i> View
                    </a>`;
                }
            }
            
            html += `<tr>
                <td>
                    <div style="font-weight:600;">${l.title}</div>
                    <div style="font-size:10px; opacity:0.7;">${l.date || ''}</div>
                </td>
                <td><span class="tag ${l.type==='Assignment'?'tag-pend':'tag-p'}">${l.type}</span></td>
                <td>${actionBtn}</td>
            </tr>`;
        });
    }
    document.querySelector('#stLmsTable tbody').innerHTML = html;
}
    function downloadSimulatedFile(filename) {
        const element = document.createElement('a');
        element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent("This is a simulated file content for: " + filename));
        element.setAttribute('download', filename || "download.txt");
        element.style.display = 'none';
        document.body.appendChild(element);
        element.click();
        document.body.removeChild(element);
    }

    function submitLeave() {
        const reason = document.getElementById('leaveReason').value;
        const date = document.getElementById('leaveDate').value;

        if(reason && date) {
            DB.leaves.push({
                name: activeUser.n,
                roll: activeUser.r,
                div: activeUser.d,
                reason: reason,
                date: date,
                status: 'Pending'
            });
            saveDB();
            alert("Leave Request Submitted!");
            closeModal('applyLeaveModal');
            document.getElementById('stLeaveStatus')
            .innerHTML = 
            `<span style="color:#f59e0b; font-weight:600;"><i class="fa fa-clock"></i> Leave Pending for ${date}</span>`;
        } else {
            alert("Please fill in all details.");
        }
    }

    function renderTimetable(editable) {
        const table = document.getElementById('ttTable');
        let html = "";
        
        DB.grid.forEach((row, rIdx) => {
            html += "<tr>";
            row.forEach((cell, cIdx) => {
                if(rIdx === 0) {
                    html += `<th style="background:rgba(0,0,0,0.05); padding:10px; min-width:100px;">
                        ${editable 
                            ? `<input value="${cell}" onchange="updateTt(${rIdx},${cIdx},
                            this.value)" style="width:100%; border:none; background:transparent; font-weight:800; text-align:center;">
                               <i class="fa fa-times" style="color:red; font-size:10px;
                                cursor:pointer; display:block;" onclick="removeTtCol(${cIdx})"></i>` 
                            : cell}
                    </th>`;
                } 
                else {
                    html += `<td style="padding:10px; border:1px solid rgba(0,0,0,0.1);">
                        ${editable 
                            ? `<input value="${cell}" onchange="updateTt(${rIdx},${cIdx},
                            this.value)" style="width:100%; border:none; text-align:center; background:transparent;">` 
                            : `<span style="font-weight:${cIdx===0?'800':'400'}">${cell}</span>`}
                    </td>`;
                }
            });
            
            if(editable) {
                html += `<td style="border:none; padding:5px;">
                    <i class="fa fa-times" style="color:red; cursor:pointer;" onclick="removeTtRow(${rIdx})"></i>
                </td>`;
            }
            html += "</tr>";
        });
        table.innerHTML = html;
    }

    function updateTt(r, c, val) {
        DB.grid[r][c] = val;
    }

    function postNotice() {
        const txt = document.getElementById('noticeContent').value;
        if(txt) {
            DB.notices.unshift({ 
                txt: txt, 
                date: new Date().toLocaleDateString() 
            });
            saveDB();
            alert("Notice Published Successfully");
            closeModal('noticeModal');
            document.getElementById('noticeContent').value = "";
            
            document.getElementById('noticeWidget').style.display = 'block';
            document.getElementById('noticeText').innerText = txt;
        } else {
            alert("Please write a notice first.");
        }
    }
    const REQUIRED_DOCS = [
    "Aadhar Card", "Non-Creamy Layer", "Domicile Cert", "Nationality Cert",
    "Income Cert", "10th Marksheet", "12th Marksheet", "Gap Certificate",
    "Caste Certificate", "Caste Validity"
];

function renderDocUploads() {
    const container = document.getElementById('docUploadContainer');
    container.innerHTML = REQUIRED_DOCS.map(doc => `
        <div class="doc-upload-item">
            <i class="fa fa-cloud-upload-alt doc-icon"></i>
            <div style="font-size:12px; font-weight:600;">${doc}</div>
            <small class="file-status" id="status-${doc.replace(/ /g,'')}" style="font-size:10px; color:var(--text-muted);">No file chosen</small>
            <input type="file" onchange="updateFileStatus(this, '${doc.replace(/ /g,'')}')">
        </div>
    `).join('');
}

function updateFileStatus(input, id) {
    const statusEl = document.getElementById(`status-${id}`);
    if(input.files && input.files[0]) {
        statusEl.innerText = input.files[0].name;
        statusEl.style.color = "var(--success)";
    }
}

function handleAdmissionYear() {
    const y = document.getElementById('admYear').value;
    const b = document.getElementById('admBranch');
    
    if(y === "1ST YEAR") {
        b.innerHTML = '<option value="COMBINE">COMBINE</option>';
        b.disabled = true;
    } else {
        b.disabled = false;
        b.innerHTML = ["IT", "CS", "ENTC", "MECH", "CIVIL"].map(x => `<option>${x}</option>`).join('');
    }
}

    function switchGuide(id) {
        document.querySelectorAll('.guide-tab').forEach(t => t.style.display = 'none');
        document.getElementById(id).style.display = 'block';
    }

    window.onload = function() {
    };

function toggleLinkInput() {
    const mode = document.getElementById('jobApplyMode').value;
    document.getElementById('jobExternalLink').style.display = (mode === 'EXTERNAL') ? 'block' : 'none';
}

function postNewJob() {
    const role = document.getElementById('jobRole').value;
    const company = document.getElementById('jobCompany').value;
    const stipend = document.getElementById('jobStipend').value;
    const duration = document.getElementById('jobDuration').value;
    const location = document.getElementById('jobLocation').value;
    const deadline = document.getElementById('jobDeadline').value;
    const type = document.getElementById('jobType').value;
    const mode = document.getElementById('jobApplyMode').value;
    const link = document.getElementById('jobExternalLink').value;

    if(!role || !company || !deadline) {
        alert("Please fill in Role, Company, and Deadline at minimum.");
        return;
    }

    const newJob = {
        id: Date.now(), 
        role: role,
        co: company,
        loc: location,
        dur: duration,
        stip: stipend,
        dl: deadline,
        type: type,
        mode: mode, 
    };

    DB.placements.unshift(newJob); 
    localStorage.setItem('sits_pro_jobs_real_v1', JSON.stringify(DB.placements));
    
    alert("Opportunity Posted Successfully!");
    closeModal('postJobModal');
    renderJobs(); 
}

function renderJobs() {
    const search = document.getElementById('jobSearch') ? document.getElementById('jobSearch').value.toLowerCase() : "";
    const filterType = document.getElementById('jobTypeFilter') ? document.getElementById('jobTypeFilter').value : "All";
    const container = document.getElementById('jobContainer');

    if(!container) return;

    const jobs = DB.placements.filter(j => {
        const matchSearch = j.role.toLowerCase().includes(search) || j.co.toLowerCase().includes(search);
        const matchType = filterType === "All" || j.type === filterType;
        return matchSearch && matchType;
    });

    if(jobs.length === 0) {
        container.innerHTML = `<div style="text-align:center; grid-column:1/-1; padding:40px; color:#999;">No internships found.</div>`;
        return;
    }

    container.innerHTML = jobs.map(j => {
        let isApplied = false;
        if(activeUser && activeUser.role === "STUDENT" && j.mode === "INTERNAL") {
            isApplied = DB.applications.some(app => app.jobId === j.id && app.roll === activeUser.r);
        }

        let btnHtml = "";
        if (j.mode === "EXTERNAL") {
            btnHtml = `<a href="${j.link}" target="_blank" class="btn" style="background:white; border:1px solid #00A5EC; color:#00A5EC; text-decoration:none;">
                Apply Externally <i class="fa fa-external-link-alt"></i>
            </a>`;
        } else {
            btnHtml = `<button class="btn ${isApplied ? 'btn-s' : 'btn-p'}" 
                ${isApplied ? 'disabled' : `onclick="applyJob(${j.id})"`}>
                ${isApplied ? 'Applied' : 'Apply Now'}
            </button>`;
        }

        return `
        <div class="ishala-card">
            <div class="ishala-head">
                <div>
                    <div class="ishala-role">${j.role}</div>
                    <div class="ishala-company">${j.co}</div>
                </div>
                <div class="ishala-logo">
                    <i class="fa fa-building" style="font-size:24px; color:#ddd;"></i>
                </div>
            </div>

            <div class="ishala-details">
                <div class="ishala-item">
                    <span class="ishala-label"><i class="fa fa-map-marker-alt"></i> Location</span>
                    <span class="ishala-value">${j.loc}</span>
                </div>
                <div class="ishala-item">
                    <span class="ishala-label"><i class="fa fa-calendar-alt"></i> Duration</span>
                    <span class="ishala-value">${j.dur}</span>
                </div>
                <div class="ishala-item">
                    <span class="ishala-label"><i class="fa fa-money-bill-wave"></i> Stipend</span>
                    <span class="ishala-value">${j.stip}</span>
                </div>
            </div>

            <div class="ishala-tags">
                <span class="ishala-tag">${j.type}</span>
                <span class="ishala-time"><i class="fa fa-clock"></i> Apply by ${j.dl}</span>
            </div>

            <div class="ishala-footer">
                <div style="font-size:12px; color:#00A5EC; font-weight:600; cursor:pointer;">View Details <i class="fa fa-chevron-right"></i></div>
                ${btnHtml}
            </div>
        </div>
        `;
    }).join('');

    animateLists(); 
}
function applyJob(jobId) {
        if(!activeUser || activeUser.role !== "STUDENT") {
            alert("Only students can apply.");
            return;
        }

        DB.applications.push({
            appId: Date.now(),
            jobId: jobId,
            roll: activeUser.r,
            name: activeUser.n,
            date: new Date().toLocaleDateString(),
            status: 'Applied'
        });
        
        saveDB();
        alert("Application Submitted Successfully!");
        renderJobs(); 
    }

function openSubmitModal(lmsId, title) {
        document.getElementById('submitAssignmentModal')
        .style.display = 'flex';
        document.getElementById('submitLmsId')
        .value = lmsId;
        document.getElementById('submitTargetTitle')
        .innerHTML = `Submitting for: <span style="font-weight:700; color:var(--text-main);">${title}</span>`;
        
        document.getElementById('submitLink')
        .value = "";
        document.getElementById('submitFileLocal')
        .value = "";
    }

function saveAssignmentSubmission() {
    const lmsId = document.getElementById('submitLmsId'
    ).value;
    const link = document.getElementById('submitLink')
    .value;
    const fileInp = document.getElementById('submitFileLocal');
    
    let subLink = "#";
    let isFile = false;

    if (fileInp.files.length > 0) {
        subLink = fileInp.files[0].name; 
        isFile = true;
    } else if (link) {
        subLink = link;
    } else {
        alert("Please attach a file or paste a link.");
        return;
    }

    const newSub = {
        subId: Date.now(),
        lmsId: lmsId,
        studentRoll: activeUser.r,
        studentName: activeUser.n,
        link: subLink,
        isFile: isFile,
        date: new Date().toLocaleDateString(),
        status: "Submitted"
    };

    DB.submissions.push(newSub);
    saveDB();
    
    alert("Assignment Submitted Successfully!");
    closeModal('submitAssignmentModal');
    renderStudentLMS();
}

function openStDocModal() {
    document.getElementById('stDocFile').value = ""; 
    document.getElementById('stDocModal').style.display = 'flex';
}

function saveStudentUpload() {
    const docType = document.getElementById('stDocType').value;
    const fileInput = document.getElementById('stDocFile');
    
    if (fileInput.files.length === 0) {
        alert("Please select a file to upload.");
        return;
    }

    const fileName = fileInput.files[0].name;

    const dbIndex = DB.students.findIndex(s => s.p === activeUser.p);
    
    if (dbIndex > -1) {
        if (!DB.students[dbIndex].docs) {
            DB.students[dbIndex].docs = {};
        }

        DB.students[dbIndex].docs[docType] = {
            fileName: fileName,
            uploaded: true,
            date: new Date().toLocaleDateString()
        };

        activeUser.docs = DB.students[dbIndex].docs;

        saveDB(); 
        renderStudentSelfDocs();
        closeModal('stDocModal');
        alert("Document Uploaded Successfully!");
    } else {
        alert("Error: Student record not found.");
    }
}

function renderStudentSelfDocs() {
    const tableBody = document.querySelector('#stSelfDocTable tbody');
    if(!tableBody) return; 

    const docs = activeUser.docs || {};
    const docKeys = Object.keys(docs);

    let html = "";
    
    if (docKeys.length === 0) {
        html = `<tr><td colspan="3" style="text-align:center; padding:15px; color:var(--text-muted);">No documents uploaded yet.</td></tr>`;
    } else {
        docKeys.forEach(key => {
            const doc = docs[key];
            html += `
            <tr>
                <td style="font-weight:600;">${key}</td>
                <td>${doc.fileName}</td>
                <td><span class="tag tag-p">Uploaded</span></td>
            </tr>`;
        });
    }

    tableBody.innerHTML = html;
}

function submitIssueReport() {
    const category = document.getElementById('issueCategory').value;
    const desc = document.getElementById('issueDesc').value;

    if (!desc.trim()) {
        alert("Please describe the issue.");
        return;
    }

    const newIssue = {
        id: Date.now(),
        studentName: activeUser.n,
        studentRoll: activeUser.r,
        studentPhone: activeUser.p,
        category: category,
        description: desc,
        date: new Date().toLocaleDateString(),
        status: 'Open'
    };

    DB.issues.push(newIssue);
    saveDB(); 
    
    alert("Issue Reported Successfully. Admin will review it.");
    document.getElementById('issueDesc').value = "";
    closeModal('reportIssueModal');
}

function renderAdminIssues() {
    const tbody = document.querySelector('#adminIssueTable tbody');
    if (!tbody) return;

    if (DB.issues.length === 0) {
        tbody.innerHTML = `<tr><td colspan="4" style="text-align:center; padding:15px; color:var(--text-muted);">No issues reported.</td></tr>`;
        return;
    }

    tbody.innerHTML = DB.issues.map((issue, index) => `
        <tr style="background:${issue.status === 'Resolved' ? 'rgba(0,0,0,0.02)' : 'white'}">
            <td>
                <div style="font-weight:600; font-size:12px;">${issue.studentName}</div>
                <div style="font-size:10px; color:var(--text-muted);">Roll: ${issue.studentRoll}</div>
            </td>
            <td><span class="tag" style="background:#f3f4f6; color:#374151;">${issue.category}</span></td>
            <td>
                <div style="font-size:12px; color:var(--text-main); max-width:200px; white-space:normal;">
                    ${issue.description}
                </div>
                <div style="font-size:10px; color:var(--text-muted); margin-top:2px;">${issue.date}</div>
            </td>
            <td>
                ${issue.status === 'Open' ? 
                `<button class="btn btn-s" style="padding:4px 8px; font-size:10px;" onclick="resolveIssue(${index})">
                    <i class="fa fa-check"></i> Resolve
                 </button>` : 
                `<span style="color:green; font-size:11px; font-weight:bold;"><i class="fa fa-check-circle"></i> Done</span>`}
            </td>
        </tr>
    `).join('');
}

function resolveIssue(index) {
    if(confirm("Mark this issue as Resolved?")) {
        DB.issues[index].status = "Resolved";
        saveDB();
        renderAdminIssues();
    }
}
function openAboutCollege() {
    const modal = document.getElementById('aboutCollegeModal');
    if(modal) {
        modal.style.display = 'flex';
    } else {
        alert("Error: About College module is loading...");
    }
}
function openStudyMaterial() {
    const modal = document.getElementById('studyMaterialModal');
    if(modal) {
        modal.style.display = 'flex';
    } else {
        alert("Error: Study Material module is loading...");
    }
}
function openUniversityLogin() {
    const modal = document.getElementById('universityLoginModal');
    if(modal) {
        modal.style.display = 'flex';
    } else {
        alert("Error: University Login module is loading...");
    }
}
function openInAppBrowser(url, title) {
    const modal = document.getElementById('universalBrowserModal');
    const frame = document.getElementById('universalFrame');
    const titleText = document.getElementById('browserTitleText');
    
    titleText.innerText = title;
    frame.src = url;
    
    modal.style.display = 'flex';
}

function refreshBrowserFrame() {
    const frame = document.getElementById('universalFrame');
    frame.src = frame.src; 
}

function postNewJob() {
    const role = document.getElementById('jobRole').value;
    const company = document.getElementById('jobCompany').value;
    const stipend = document.getElementById('jobStipend').value;
    const duration = document.getElementById('jobDuration').value;
    const location = document.getElementById('jobLocation').value;
    const deadline = document.getElementById('jobDeadline').value;
    const type = document.getElementById('jobType').value;
    const mode = document.getElementById('jobApplyMode').value;
    const link = document.getElementById('jobExternalLink').value;

    if(!role || !company || !deadline) {
        alert("Please fill in Role, Company, and Deadline at minimum.");
        return;
    }

    const newJob = {
        id: Date.now(), 
        role: role,
        co: company,
        loc: location,
        dur: duration,
        stip: stipend,
        dl: deadline,
        type: type,
        mode: mode,
        link: link || "#"
    };

    DB.placements.unshift(newJob); 
    localStorage.setItem('sits_pro_jobs_real_v1', JSON.stringify(DB.placements));
    
    alert("Opportunity Posted Successfully!");
    closeModal('postJobModal');
    renderJobs(); 
}

function renderJobs() {
    const search = document.getElementById('jobSearch') ? document.getElementById('jobSearch').value.toLowerCase() : "";
    const filterType = document.getElementById('jobTypeFilter') ? document.getElementById('jobTypeFilter').value : "All";
    const container = document.getElementById('jobContainer');

    if(!container) return; 
    const jobs = DB.placements.filter(j => {
        const matchSearch = j.role.toLowerCase().includes(search) || j.co.toLowerCase().includes(search);
        const matchType = filterType === "All" || j.type === filterType;
        return matchSearch && matchType;
    });

    if(jobs.length === 0) {
        container.innerHTML = `<div style="text-align:center; grid-column:1/-1; padding:40px; color:#999;">No internships found.</div>`;
        return;
    }

    container.innerHTML = jobs.map(j => {
        let isApplied = false;
        if(activeUser && activeUser.role === "STUDENT" && j.mode === "INTERNAL") {
            isApplied = DB.applications.some(app => app.jobId === j.id && app.roll === activeUser.r);
        }

        let btnHtml = "";
        if (j.mode === "EXTERNAL") {
            btnHtml = `<a href="${j.link}" target="_blank" class="btn" style="background:white; border:1px solid #00A5EC; color:#00A5EC; text-decoration:none;">
                Apply Externally <i class="fa fa-external-link-alt"></i>
            </a>`;
        } else {
            btnHtml = `<button class="btn ${isApplied ? 'btn-s' : 'btn-p'}" 
                ${isApplied ? 'disabled' : `onclick="applyJob(${j.id})"`}>
                ${isApplied ? 'Applied' : 'Apply Now'}
            </button>`;
        }

        return `
        <div class="ishala-card">
            <div class="ishala-head">
                <div>
                    <div class="ishala-role">${j.role}</div>
                    <div class="ishala-company">${j.co}</div>
                </div>
                <div class="ishala-logo">
                    <i class="fa fa-building" style="font-size:24px; color:#ddd;"></i>
                </div>
            </div>

            <div class="ishala-details">
                <div class="ishala-item">
                    <span class="ishala-label"><i class="fa fa-map-marker-alt"></i> Location</span>
                    <span class="ishala-value">${j.loc}</span>
                </div>
                <div class="ishala-item">
                    <span class="ishala-label"><i class="fa fa-calendar-alt"></i> Duration</span>
                    <span class="ishala-value">${j.dur}</span>
                </div>
                <div class="ishala-item">
                    <span class="ishala-label"><i class="fa fa-money-bill-wave"></i> Stipend</span>
                    <span class="ishala-value">${j.stip}</span>
                </div>
            </div>

            <div class="ishala-tags">
                <span class="ishala-tag">${j.type}</span>
                <span class="ishala-time"><i class="fa fa-clock"></i> Apply by ${j.dl}</span>
            </div>

            <div class="ishala-footer">
                <div style="font-size:12px; color:#00A5EC; font-weight:600; cursor:pointer;">View Details <i class="fa fa-chevron-right"></i></div>
                ${btnHtml}
            </div>
        </div>
        `;
    }).join('');
}

document.addEventListener('click', function(e) {
    if (e.target.classList.contains('btn')) {
        const button = e.target;
        const circle = document.createElement('span');
        const diameter = Math.max(button.clientWidth, button.clientHeight);
        const radius = diameter / 2;

        circle.style.width = circle.style.height = `${diameter}px`;
        circle.style.left = `${e.clientX - button.getBoundingClientRect().left - radius}px`;
        circle.style.top = `${e.clientY - button.getBoundingClientRect().top - radius}px`;
        circle.classList.add('ripple');

        const ripple = button.getElementsByClassName('ripple')[0];
        if (ripple) { ripple.remove(); }

        button.appendChild(circle);
    }
});

function animateLists() {
    const tables = document.querySelectorAll('tbody tr, .qa-card, .ishala-card');
    tables.forEach((item, index) => {
        item.style.animationDelay = `${index * 0.05}s`; 
        item.classList.add('animate-pop-in');
    });
}

function openMessageModal(phone, name) {
    document.getElementById('msgTargetPhone').value = phone;
    document.getElementById('msgTargetName').innerText = name;
    document.getElementById('msgContent').value = '';
    
    openModal('messageModal');
}

function sendStudentMessage() {
    const toPhone = document.getElementById('msgTargetPhone').value;
    const txt = document.getElementById('msgContent').value;
    
    if(!txt.trim()) { alert("Please type a message."); return; }
    if(!toPhone) { alert("Error: No recipient selected."); return; }
    
    const newMsg = {
        id: Date.now(),
        from: (activeUser ? activeUser.n : "System") + " (" + (activeUser && activeUser.role === 'ADMIN' ? 'Admin' : 'Faculty') + ")",
        to: toPhone, 
        txt: txt,
        date: new Date().toLocaleString(),
        read: false
    };

    DB.messages.unshift(newMsg);
    saveDB();
    
    alert("Message Sent Successfully!");
    closeModal('messageModal');
}

function openStudentMessages() {
    renderStudentMessages();
    openModal('viewMessagesModal');
    
    const badge = document.getElementById('msgBadge');
    if(badge) badge.style.display = 'none';
}

function renderStudentMessages() {
    const list = document.getElementById('studentMsgList');
    
    const myMsgs = DB.messages.filter(m => String(m.to) === String(activeUser.p));
    
    if(myMsgs.length === 0) {
        list.innerHTML = `
        <div style="text-align:center; padding:30px; color:var(--text-muted);">
            <i class="fa fa-inbox" style="font-size:30px; opacity:0.5; margin-bottom:10px;"></i><br>
            No messages received yet.
        </div>`;
        return;
    }
    
    list.innerHTML = myMsgs.map(m => `
        <div class="card" style="margin:0; padding:15px; border-left:4px solid var(--accent); box-shadow:0 2px 5px rgba(0,0,0,0.05);">
            <div style="display:flex; justify-content:space-between; margin-bottom:8px; border-bottom:1px solid #eee; padding-bottom:5px;">
                <strong style="font-size:13px; color:var(--accent);"><i class="fa fa-user-circle"></i> ${m.from}</strong>
                <small style="color:var(--text-muted); font-size:10px;">${m.date}</small>
            </div>
            <div style="font-size:14px; color:var(--text-main); line-height:1.5;">${m.txt}</div>
        </div>
    `).join('');
}
</script>
</html>